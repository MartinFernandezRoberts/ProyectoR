var e=Object.defineProperty,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,t=(n,r,a)=>r in n?e(n,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[r]=a,o=(e,o)=>{for(var i in o||(o={}))r.call(o,i)&&t(e,i,o[i]);if(n)for(var i of n(o))a.call(o,i)&&t(e,i,o[i]);return e};import{o as i,c as s,a as l,F as c,r as d,f as u,d as p,b as m,E as g,t as h,h as b,i as f,j as x,s as y,m as v,n as k,q as w,u as C,x as I,y as B,z as D,g as S,P as $,p as j,e as F,w as E,Q as U,k as A,v as z,l as O,H as _,I as q,M}from"./vendor.5bda7e88.js";import{d as V,V as P,_ as G,a as L,b as T,c as N,e as R,f as H,g as W,h as Z}from"./SandwichIcon.ee25ba13.js";const Q={name:"Panel",components:{SandwichIcon:V},data:()=>({links:["items","banners"],menu:!1}),methods:{capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1)}},J={class:"\r\n            flex flex-wrap flex-col\r\n            md:flex-row\r\n            justify-between\r\n            md:items-center\r\n            bg-black\r\n            p-4\r\n            md:p-6\r\n            text-white\r\n        "},K={class:"flex items-center"},X=l("a",{class:"md:text-xl font-bold",href:"/"},"ProyectoR",-1),Y=l("h2",{class:"text-sm md:text-base"},[l("span",{class:"text-pink-600 font-bold mx-1"}," >"),u("Panel de Control ")],-1),ee={key:0,class:"mx-2 hidden md:inline"},ne=l("span",{class:"mr-4 h-px flex-1 md:hidden bg-pink-600"},null,-1);Q.render=function(e,n,r,a,t,o){const b=p("SandwichIcon"),f=p("router-link"),x=p("router-view");return i(),s(c,null,[l("nav",J,[l("div",K,[X,Y,l(b,{class:"ml-auto h-4 md:hidden cursor-pointer",onClick:n[1]||(n[1]=e=>t.menu=!t.menu)})]),l("nav",{class:["mt-4 md:mt-0 md:block",{hidden:!t.menu}]},[(i(!0),s(c,null,d(t.links,((e,r)=>(i(),s("div",{key:r,class:"flex items-center md:inline"},[r>0?(i(),s("span",ee,"|")):m("",!0),ne,l(f,{to:`/panel/${e}`,"active-class":"text-pink-600 font-bold",onClick:n[2]||(n[2]=e=>t.menu=!1)},{default:g((()=>[u(h(o.capitalize(e)),1)])),_:2},1032,["to"])])))),128))],2)]),l(x)],64)};const re={name:"EstadoMenu",props:{id:String,estado:String},emits:["cargar"],methods:{cambiarEstado(e){b.post(`http://localhost:3000/api/items/${this.id}/cambiarEstado`,{estado:e}).then((e=>{console.log(e.data),this.$emit("cargar")})).catch((e=>{console.error(e)}))},eliminar(){b.delete(`http://localhost:3000/api/items/${this.id}`).then((e=>{console.log(e.data),this.$emit("cargar")})).catch((e=>{console.error(e)}))}}};re.render=function(e,n,r,a,t,o){return i(),s("div",null,[f(l("button",{class:"\r\n                px-4\r\n                py-2\r\n                rounded-lg\r\n                bg-blue-300\r\n                text-white\r\n                font-bold\r\n                transition-colors\r\n                duration-200\r\n                ease-out\r\n            ",type:"button",onClick:n[1]||(n[1]=e=>o.cambiarEstado("publicado"))}," Publicar ",512),[[x,"publicado"!==r.estado]]),f(l("button",{class:"\r\n                px-4\r\n                py-2\r\n                rounded-lg\r\n                bg-yellow-500\r\n                text-gray-700\r\n                font-bold\r\n                transition-colors\r\n                duration-200\r\n                ease-out\r\n            ",type:"button",onClick:n[2]||(n[2]=e=>o.cambiarEstado("bajado"))}," Bajar ",512),[[x,"bajado"!==r.estado]]),l("button",{class:"\r\n                px-4\r\n                py-2\r\n                rounded-lg\r\n                bg-red-700\r\n                font-bold\r\n                text-white\r\n                transition-colors\r\n                duration-200\r\n                ease-out\r\n            ",type:"button",onClick:n[3]||(n[3]=(...e)=>o.eliminar&&o.eliminar(...e))}," Eliminar ")])};const ae={name:"InfoForm",props:{info:Object,errores:Object},emits:["update","update:detalles"],data:()=>({tipos:{Casa:"Casa",Wheels:"Vehículo",Otro:"Otro"},comunas:[]}),created(){b("https://apis.digital.gob.cl/dpa/comunas").then((e=>this.comunas=e.data.map((e=>e.nombre))))}},te={class:"\r\n            px-4\r\n            py-2\r\n            flex flex-col\r\n            border-r border-b border-l-2 border-gray-500\r\n            text-gray-700\r\n            space-y-2\r\n        "},oe={class:"flex flex-col space-y-1.5"},ie=l("label",{class:"text-sm font-bold",for:"tipo"},"Categoría",-1),se=l("option",{value:"",disabled:"",selected:"",hidden:""}," Selecciona una categoría ",-1),le={class:"flex flex-col space-y-1.5"},ce=l("label",{class:"text-sm font-bold",for:"titulo"},"Título",-1),de={class:"flex flex-col space-y-1.5"},ue=l("label",{class:"text-sm font-bold",for:"descripcion"}," Descripción ",-1),pe={class:"flex flex-col space-y-1.5"},me=l("label",{class:"text-sm font-bold",for:"comuna"},"Comuna",-1),ge={id:"lista-comuna"};ae.render=function(e,n,r,a,t,o){return i(),s("form",te,[l("div",oe,[ie,l("select",{class:["px-4 2xl:px-6 py-1.5 2xl:py-2 rounded text-sm font-light leading-tight",{"text-gray-400":!r.info.tipo}],id:"tipo",value:r.info.tipo,onChange:n[1]||(n[1]=n=>(e.$emit("update","info","tipo",n.target.value),e.$emit("update:detalles")))},[se,(i(!0),s(c,null,d(t.tipos,((e,n)=>(i(),s("option",{key:n,class:"text-gris",value:n},h(e),9,["value"])))),128))],42,["value"]),f(l("small",{class:"\r\n                    block\r\n                    px-4\r\n                    py-1\r\n                    rounded-lg\r\n                    bg-red-400\r\n                    text-center text-white\r\n                "},h(r.errores.tipo),513),[[x,r.errores.tipo]])]),l("div",le,[ce,l("input",{class:["px-4 2xl:px-6 py-1.5 2xl:py-2 rounded text-sm font-light leading-tight",{"bg-red-50 ring-1 ring-inset ring-red-400":r.errores.titulo}],type:"text",id:"titulo",placeholder:"Título",value:r.info.titulo,onInput:n[2]||(n[2]=n=>e.$emit("update","info","titulo",n.target.value))},null,42,["value"]),f(l("small",{class:"\r\n                    block\r\n                    px-4\r\n                    py-1\r\n                    rounded-lg\r\n                    bg-red-400\r\n                    text-center text-white\r\n                "},h(r.errores.titulo),513),[[x,r.errores.titulo]])]),l("div",de,[ue,l("textarea",{class:["px-4 2xl:px-6 py-1.5 2xl:py-2 rounded text-sm font-light leading-tight",{"bg-red-50 ring-1 ring-inset ring-red-400":r.errores.descripcion}],id:"descripcion",placeholder:"Descripción",value:r.info.descripcion,onInput:n[3]||(n[3]=n=>e.$emit("update","info","descripcion",n.target.value))},null,42,["value"]),f(l("small",{class:"\r\n                    block\r\n                    px-4\r\n                    py-1\r\n                    rounded-lg\r\n                    bg-red-400\r\n                    text-center text-white\r\n                "},h(r.errores.descripcion),513),[[x,r.errores.descripcion]])]),l("div",pe,[me,l("input",{class:["px-4 2xl:px-6 py-1.5 2xl:py-2 rounded text-sm font-light leading-tight",{"bg-red-50 ring-1 ring-inset ring-red-400":r.errores.comuna}],type:"text",id:"comuna",placeholder:"Comuna",list:"lista-comuna",value:r.info.comuna,onInput:n[4]||(n[4]=n=>e.$emit("update","info","comuna",n.target.value))},null,42,["value"]),l("datalist",ge,[(i(!0),s(c,null,d(t.comunas,((e,n)=>(i(),s("option",{key:n,value:e},null,8,["value"])))),128))]),f(l("small",{class:"\r\n                    block\r\n                    px-4\r\n                    py-1\r\n                    rounded-lg\r\n                    bg-red-400\r\n                    text-center text-white\r\n                "},h(r.errores.comuna),513),[[x,r.errores.comuna]])])])},y(v);const he={ubicacion:k().required(),orientacion:k().nullable(),area:w().required().positive(),construido:w().nullable().positive(),wc:w().required().positive(),estacionamiento:w().nullable().positive(),dormitorio:w().required().positive(),piso:w().required().positive(),gastosComunes:w().nullable().positive(),bodega:C().nullable(),mascotas:C().nullable(),calefaccion:C().nullable(),cocina:C().nullable(),terraza:C().nullable(),balcon:C().nullable(),piscina:C().nullable(),quincho:C().nullable(),edificio:C().nullable(),lavanderiaE:C().nullable(),eventosE:C().nullable()},be={marca:k().required(),transmision:k().required(),combustible:k().required(),categoria:k().nullable(),color:k().nullable(),year:w().required(),km:w().required(),cilindrada:w().required(),rendimiento:w().nullable(),abs:C().nullable(),airbag:C().nullable(),ac:C().nullable(),alarma:C().nullable(),vidriosElectricos:C().nullable()},fe=new P({info:I({tipo:k().required(),titulo:k().required(),descripcion:k().nullable(),comuna:k().nullable()}),imagenes:I({archivos:B().required().of(D().test("fileSize","Archivo demasiado pesado. Peso máximo: 3 MB.",(e=>e.size<=3072e3)).test("fileFormat","Formato no soportado. Debe ser una imagen.",(e=>e.type.includes("image")))).min(1),borrar:B().nullable().of(k())}),detalles:I().when("info.tipo",((e,n)=>{switch(e){case"Casa":return n.required().shape(he);case"Wheels":return n.required().shape(be);default:return n.nullable()}})),docs:I().nullable(),bases:I({bases:C().required()})}),xe=new P(o(o({},he),be)),ye={name:"ChevronIcon"},ve={viewBox:"0 0 8 8"},ke=l("polyline",{points:"1,2 4,6 7,2",stroke:"currentColor","stroke-width":"1","stroke-linecap":"round","stroke-linejoin":"round",fill:"none"},null,-1);ye.render=function(e,n,r,a,t,o){return i(),s("svg",ve,[ke])};const we={name:"HeaderAcordeon",components:{ChevronIcon:ye},props:{seccion:String,actual:Boolean,error:Boolean}},Ce={class:"px-2 pt-1 bg-gray-500"};we.render=function(e,n,r,a,t,o){const c=p("ChevronIcon");return i(),s("button",{type:"button",class:["flex justify-between items-end text-left font-bold border-b-2  border-gray-500",r.error?"text-red-700":"text-gray-500"]},[u(h(r.seccion)+" ",1),l("div",Ce,[l(c,{class:["h-3 bg-gray-500 text-white",{"transform rotate-180":r.actual}]},null,8,["class"])])],2)};const Ie={name:"Slideshow",components:{FlechaCirculoIcon:G},props:{imagenes:Array},data:()=>({index:0}),created(){setInterval((()=>this.slide(1)),3e3)},methods:{urlDev:e=>"http://localhost:3000/"+e,slide(e){(e+=this.index)<0?e=this.imagenes.length-1:e===this.imagenes.length&&(e=0),this.index=e}}},Be={class:"relative"},De={key:0,class:"\r\n                absolute\r\n                inset-0\r\n                flex\r\n                justify-between\r\n                items-center\r\n                text-white\r\n                opacity-20\r\n                hover:opacity-50\r\n                transition-opacity\r\n                duration-200\r\n                ease-out\r\n            "},Se={class:"self-end pb-1 flex space-x-1"};Ie.render=function(e,n,r,a,t,o){const u=p("FlechaCirculoIcon");return i(),s("div",Be,[l("img",{class:"w-full h-full object-cover",src:o.urlDev(r.imagenes[t.index]),alt:""},null,8,["src"]),r.imagenes.length>1?(i(),s("div",De,[l(u,{class:"mx-2 w-6 z-10 cursor-pointer",transform:"scale(-1,1)",onClick:n[1]||(n[1]=e=>o.slide(-1))}),l("div",Se,[(i(!0),s(c,null,d(r.imagenes,((e,n)=>(i(),s("svg",{key:n,viewBox:"0 0 10 10",class:"w-3 z-10 cursor-pointer",onClick:e=>t.index=n},[l("circle",{cx:"5",cy:"5",r:"4",stroke:"white",fill:n===t.index?"white":"none"},null,8,["fill"])],8,["onClick"])))),128))]),l(u,{class:"mx-2 w-6 z-10 cursor-pointer",onClick:n[2]||(n[2]=e=>o.slide(1))})])):m("",!0)])};const $e={name:"DetalleItem",components:{Slideshow:Ie,HeaderAcordeon:we,InfoForm:ae,ImagenesItemForm:L,DetallesItemForm:T,DocsItemForm:N,EstadoMenu:re},props:{item:Object},emits:["cerrar","cargar"],data(){return{seccionActual:"",form:{info:{tipo:this.item.tipo,titulo:this.item.titulo,descripcion:this.item.descripcion,comuna:this.item.comuna},imagenes:{archivos:this.item.imagenes,borrar:[]},detalles:this.item.item,docs:this.item.docs||{}},errores:{info:{},imagenes:{},detalles:{},docs:{}},validado:!1,enviando:!1,errorServidor:""}},methods:{urlDev:e=>"http://localhost:3000/"+e,toggleSeccion(e){this.seccionActual===e?this.seccionActual="":this.seccionActual=e},tieneErrores(e){return Object.values(this.errores[e]).some((e=>e))},async actualizarDetalles(){this.form.detalles={},this.errores.detalles={},this.validado&&this.submit()},async actualizarInput(e,n,r){this.form[e][n]=r,this.validado&&("detalles"===e?this.errores.detalles[n]=await xe.validate(n,r):this.errores[e][n]=await fe.validateNested(e,n,r))},async guardar(){console.log("enviar datos para guardar como borrador")},async submit(){console.log(fe.schema);const e=await fe.validateAll(this.form);if(e.valid&&!this.enviando){this.enviando=!0;let e=new FormData;for(const[n,r]of Object.entries(this.form.info))e.set(`info[${n}]`,r);for(const[n,r]of Object.entries(this.form.detalles))e.set(`detalles[${n}]`,r);this.form.imagenes.archivos.forEach((n=>{e.append("imagenes",n)})),this.form.imagenes.borrar.forEach((n=>{e.append("borrar",n)})),Object.values(this.form.docs).forEach((n=>{e.append("docs",n)})),b.post(this.urlDev("api/items"),e).then((e=>console.log(e.data))).catch((e=>console.error(e))),this.enviando=!1}else{for(const[n,r]of Object.entries(e.errors)){const e=n.split(".");e.length>1?this.errores[e[0]][e[1]]=r.substring(e[0].length+1):this.errores[e[0]]=r}console.log("validación fallida")}this.validado=!0}}},je={class:"\r\n                w-11/12\r\n                md:w-3/4\r\n                h-3/4\r\n                flex flex-col\r\n                rounded-lg\r\n                bg-gray-200\r\n                text-black\r\n                overflow-auto\r\n            "},Fe={class:"flex-1 pl-4 py-2 text-xl font-bold"},Ee={class:"p-2 bg-white text-xs text-gray-500 underline"},Ue={class:"flex-1 p-2 flex flex-col justify-center space-y-1"},Ae={class:"flex flex-col"},ze={class:"flex flex-col"},Oe={class:"flex flex-col"},_e={key:0,class:"flex flex-col"},qe={class:"flex flex-col"};$e.render=function(e,n,r,a,t,o){const c=p("Slideshow"),d=p("HeaderAcordeon"),u=p("EstadoMenu"),g=p("InfoForm"),b=p("ImagenesItemForm"),y=p("DetallesItemForm"),v=p("DocsItemForm");return i(),s("div",{class:"\r\n            fixed\r\n            z-30\r\n            inset-0\r\n            flex\r\n            justify-center\r\n            items-center\r\n            bg-black bg-opacity-75\r\n        ",onClick:n[10]||(n[10]=S((n=>e.$emit("cerrar")),["self"]))},[l("div",je,[l("div",{id:"cabecera",class:"flex bg-gray-500 text-white cursor-pointer",onClick:n[1]||(n[1]=e=>t.seccionActual="")},[l("h3",Fe,h(r.item.titulo),1),l("p",Ee,h(r.item.tipo),1)]),f(l(c,{class:"h-48",imagenes:r.item.imagenes},null,8,["imagenes"]),[[x,""===t.seccionActual]]),l("div",Ue,[l("section",Ae,[l(d,{seccion:"Estado",actual:"Estado"===t.seccionActual,error:!1,onClick:n[2]||(n[2]=e=>o.toggleSeccion("Estado"))},null,8,["actual"]),f(l(u,{class:"\r\n                            px-4\r\n                            py-2\r\n                            flex flex-col\r\n                            border-r border-b border-l-2 border-gray-500\r\n                            text-gray-700\r\n                            space-y-2\r\n                        ",id:r.item._id,estado:r.item.estado,onCargar:n[3]||(n[3]=n=>e.$emit("cargar"))},null,8,["id","estado"]),[[x,"Estado"===t.seccionActual]])]),l("section",ze,[l(d,{seccion:"Información general",actual:"Información general"===t.seccionActual,error:o.tieneErrores("info"),onClick:n[4]||(n[4]=e=>o.toggleSeccion("Información general"))},null,8,["actual","error"]),f(l(g,{info:t.form.info,errores:t.errores.info,onUpdate:o.actualizarInput,"onUpdate:detalles":o.actualizarDetalles},null,8,["info","errores","onUpdate","onUpdate:detalles"]),[[x,"Información general"===t.seccionActual]])]),l("section",Oe,[l(d,{seccion:"Imágenes",actual:"Imágenes"===t.seccionActual,error:o.tieneErrores("imagenes"),onClick:n[5]||(n[5]=e=>o.toggleSeccion("Imágenes"))},null,8,["actual","error"]),f(l(b,{class:"\r\n                            px-4\r\n                            py-2\r\n                            flex flex-col\r\n                            border-r border-b border-l-2 border-gray-500\r\n                            text-gray-700\r\n                            space-y-2\r\n                        ",imagenes:t.form.imagenes,errores:t.errores.imagenes,onUpdate:o.actualizarInput},null,8,["imagenes","errores","onUpdate"]),[[x,"Imágenes"===t.seccionActual]])]),t.form.info.tipo&&"Otro"!==t.form.info.tipo?(i(),s("section",_e,[l(d,{seccion:"Detalles",actual:"Detalles"===t.seccionActual,error:o.tieneErrores("detalles"),onClick:n[6]||(n[6]=e=>o.toggleSeccion("Detalles"))},null,8,["actual","error"]),f(l(y,{class:"\r\n                            px-4\r\n                            py-2\r\n                            flex flex-col\r\n                            border-r border-b border-l-2 border-gray-500\r\n                            text-gray-700\r\n                            space-y-2\r\n                        ",tipo:t.form.info.tipo,detalles:t.form.detalles,errores:t.errores.detalles,onUpdate:o.actualizarInput},null,8,["tipo","detalles","errores","onUpdate"]),[[x,"Detalles"===t.seccionActual]])])):m("",!0),l("section",qe,[l(d,{seccion:"Documentos",actual:"Documentos"===t.seccionActual,error:o.tieneErrores("docs"),onClick:n[7]||(n[7]=e=>o.toggleSeccion("Documentos"))},null,8,["actual","error"]),f(l(v,{class:"\r\n                            px-4\r\n                            py-2\r\n                            flex flex-col\r\n                            border-r border-b border-l-2 border-gray-500\r\n                            text-gray-700\r\n                            space-y-2\r\n                        ",id:r.item._id,docs:t.form.docs,errores:t.errores.docs,onUpdate:o.actualizarInput,onReset:n[8]||(n[8]=e=>t.form.docs={})},null,8,["id","docs","errores","onUpdate"]),[[x,"Documentos"===t.seccionActual]])])]),l("button",{class:"\r\n                    mt-auto\r\n                    px-4\r\n                    py-2\r\n                    border-t border-gray-500\r\n                    text-right\r\n                    font-bold\r\n                    text-gray-700\r\n                    hover:bg-pink-700 hover:text-white\r\n                ",type:"button",onClick:n[9]||(n[9]=(...e)=>o.submit&&o.submit(...e))}," Guardar ")])])};const Me={name:"MiniItem",props:{item:Object},methods:{urlDev:e=>"http://localhost:3000/"+e}},Ve={class:"flex flex-col bg-gray-100 rounded-lg shadow"},Pe={id:"info",class:"p-4"},Ge={class:"text-lg text-center text-gray-700 font-bold"};Me.render=function(e,n,r,a,t,o){return i(),s("div",Ve,[l("img",{src:o.urlDev(r.item.imagenes[0]),alt:"imagen item",class:"h-48 object-cover rounded-t-lg"},null,8,["src"]),l("div",Pe,[l("h3",Ge,h(r.item.titulo),1)])])};const Le={name:"GestorItems",components:{FlechaCirculoIcon:G,MiniItem:Me,DetalleItem:$e},data:()=>({menu:!0,seccionActual:"pendiente",secciones:["pendiente","publicado","sorteado","borrador","bajado"],items:[],filtrado:[],itemActual:{},modal:!1,parche:{numerosComprados:"132",valoracion:"3.5",fechaSorteo:new Date("2021-10-30T18:00:00-0400"),precioBoleto:5e3},cargando:!0}),created(){this.cargar()},methods:{cargar(){b("http://localhost:3000/api/items/todo").then((e=>{this.items=e.data,this.filtrar(this.seccionActual),this.cargando=!1})).catch((e=>{console.error(e)})),this.modal=!1},filtrar(e){this.filtrado=this.items.filter((n=>n.estado===e))},setSeccion(e){this.cargando=!0,this.seccionActual=e,this.filtrar(e),this.cargando=!1,this.menu=!1},capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1)}},Te={class:"flex-1"},Ne={class:"mb-4 text-xl text-center font-bold text-gray-700"};Le.render=function(e,n,r,a,t,u){const g=p("FlechaCirculoIcon"),b=p("MiniItem"),f=p("DetalleItem");return i(),s("div",Te,[l(g,{class:["h-6 m-1 sticky top-0 z-10 hover:text-pink-600 cursor-pointer transition-colors duration-200 ease-out",t.menu?"text-white":"text-black"],transform:t.menu?"scale(-1,1)":"",onClick:n[1]||(n[1]=e=>t.menu=!t.menu)},null,8,["class","transform"]),l("div",{id:"menu",class:["h-full flex flex-col justify-center inset-0 bg-black text-center text-white",t.menu?"fixed":"hidden"],onClick:n[2]||(n[2]=S((e=>t.menu=!1),["self"]))},[l("ul",null,[(i(!0),s(c,null,d(t.secciones,((e,n)=>(i(),s("li",{key:n,class:["cursor-pointer hover:text-pink-600 transition-colors duration-200 ease-out",{"font-bold text-pink-600":t.seccionActual===e}],onClick:n=>u.setSeccion(e)},h(u.capitalize(e)),11,["onClick"])))),128))])],2),l("h2",Ne,h(u.capitalize(t.seccionActual)),1),l("div",{class:["container 3xl:w-3/4 mx-auto px-4 grid gap-4 auto-rows-max grid-cols-1 md:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4",{"opacity-20 filter blur-sm":t.cargando}]},[(i(!0),s(c,null,d(t.filtrado,((e,n)=>(i(),s(b,{key:n,class:"cursor-pointer",item:o(o({},e),t.parche),onClick:n=>{t.itemActual=e,t.modal=!0}},null,8,["item","onClick"])))),128))],2),t.modal?(i(),s(f,{key:0,item:t.itemActual,onCerrar:n[3]||(n[3]=e=>t.modal=!1),onCargar:u.cargar},null,8,["item","onCargar"])):m("",!0)])};const Re="http://localhost:3000/api/casas/";class He{static async index(){return await b.get(Re).then((e=>e.data)).catch((e=>console.error(e)))}static async todo(){return await b.get(`${Re}todo`).then((e=>e.data)).catch((e=>console.error(e)))}static async create(e){return await b.post(Re,e).then((e=>console.log(e))).catch((e=>console.error(e)))}static async update(e,n){return await b.post(`${Re}${e}/editar`,n).then((e=>console.log(e))).catch((e=>console.error(e)))}static async destacar(e,n){return await b.post(`${Re}${e}/destacar`,n).then((e=>console.log(e))).catch((e=>console.error(e)))}static async delete(e){return await b.delete(`${Re}${e}`).then((e=>{console.log(e)})).catch((e=>{console.error(e)}))}}const We={name:"MultiImgDrop",components:{UploadIcon:R,DeleteIcon:H,ZoomIcon:W,StarIcon:Z},props:{images:{type:Array,default:function(){return[]}},paBorrar:{type:Array,default:function(){return[]}}},emits:["update:images","update:paBorrar"],data(){return{storedImages:this.images,previews:this.images.map((e=>this.urlDev(e))),dragging:!1,modal:!1,curSlide:0,featured:0,scrollbar:null}},computed:{notEmpty(){return this.previews.length>0}},mounted(){this.scrollbar=new $("#previews"),this.$emit("update:images",[])},methods:{urlDev:e=>"http://localhost:3000/"+e,drop(e){this.addFiles(e.dataTransfer.files),this.dragging=!1},addFiles(e){const n=this.images,r=this;for(let a=0;a<e.length;a++){const t=e[a];r.previews.push(URL.createObjectURL(t)),n.push(t)}this.$emit("update:images",n),setTimeout((()=>{this.scrollbar.update()}),100)},rmFile(e){if(e<this.featured?this.featured--:e==this.featured&&(this.featured=0),e>=this.storedImages.length){const n=this.images;n.splice(e,1),this.$emit("update:images",n)}else{const n=this.paBorrar.concat(this.storedImages.splice(e,1));this.$emit("update:paBorrar",n)}this.previews.splice(e,1),this.$nextTick((function(){this.scrollbar.update()}))},clear(){this.previews.length=0,this.$emit("update:images",[])},openLightbox(e){this.curSlide=e,this.modal=!0},slide(e){(e+=this.curSlide)<0?e=this.previews.length-1:e==this.previews.length&&(e=0),this.curSlide=e}}},Ze=E();j("data-v-208fa2c8");const Qe={class:"mx-auto"},Je={class:"\r\n                    flex flex-col\r\n                    justify-center\r\n                    items-center\r\n                    text-center text-gray-500\r\n                    rounded-lg\r\n                "},Ke=l("p",null,"Haz click o arrastra tus imágenes aquí",-1),Xe={class:"mt-4 border-2 rounded shadow-inner"},Ye={id:"previews",class:"relative px-3 py-4 z-20 flex h-52 flex-nowrap"},en={id:"controls",class:"\r\n                                absolute\r\n                                w-full\r\n                                h-full\r\n                                flex flex-col\r\n                                justify-around\r\n                                items-center\r\n                                opacity-0\r\n                                rounded\r\n                                bg-black bg-opacity-50\r\n                                hover:opacity-100\r\n                                transition-opacity\r\n                                duration-300\r\n                                ease-out\r\n                            "},nn={id:"lightbox",class:"\r\n                fixed\r\n                z-20\r\n                inset-0\r\n                text-3xl\r\n                bg-black bg-opacity-75\r\n                flex\r\n                justify-between\r\n                items-center\r\n            "},rn={class:"w-4/5 h-full"};F();const an=Ze(((e,n,r,a,t,o)=>{const u=p("UploadIcon"),m=p("StarIcon"),g=p("ZoomIcon"),h=p("DeleteIcon");return i(),s("div",Qe,[l("div",{class:["relative p-6 bg-gray-50 border-4 border-dashed border-gray-300 rounded-lg transition-colors duration-200 ease-out",{" border-blue-200":t.dragging}],onDragover:n[3]||(n[3]=S((e=>t.dragging=!0),["prevent"])),onDragleave:n[4]||(n[4]=S((e=>t.dragging=!1),["prevent"])),onDrop:n[5]||(n[5]=S((e=>o.drop(e)),["prevent"]))},[f(l("button",{class:"\r\n                    relative\r\n                    px-2\r\n                    z-20\r\n                    border border-gray-300\r\n                    rounded\r\n                    text-gray-300\r\n                    font-bold\r\n                    hover:border-0 hover:bg-gray-300 hover:text-white\r\n                ",type:"button",onClick:n[1]||(n[1]=(...e)=>o.clear&&o.clear(...e))}," limpiar ",512),[[x,o.notEmpty]]),l("input",{class:"\r\n                    w-full\r\n                    h-full\r\n                    opacity-0\r\n                    absolute\r\n                    inset-0\r\n                    z-10\r\n                    cursor-pointer\r\n                ",type:"file",accept:"image/*",onChange:n[2]||(n[2]=e=>o.addFiles(e.target.files)),multiple:""},null,32),l("div",Je,[l(u,{class:["stroke-current",o.notEmpty?"w-14":"w-36"]},null,8,["class"]),Ke]),f(l("div",Xe,[l("div",Ye,[(i(!0),s(c,null,d(t.previews,((e,n)=>(i(),s("div",{key:n,class:["relative h-full flex-none",{"rounded ring-4 ring-yellow-300":t.featured==n,"ml-4":n>0}]},[l("div",en,[l(m,{class:["text-yellow-300 cursor-pointer",{"fill-current":t.featured===n}],onClick:e=>t.featured=n},null,8,["class","onClick"]),l(g,{class:"text-white cursor-pointer",onClick:e=>o.openLightbox(n)},null,8,["onClick"]),l(h,{class:"text-red-500 cursor-pointer",onClick:e=>o.rmFile(n)},null,8,["onClick"])]),l("img",{class:"object-cover h-full rounded",src:e,alt:`imagen ${n}`},null,8,["src","alt"])],2)))),128))])],512),[[x,o.notEmpty]])],34),f(l("div",nn,[l("span",{class:"\r\n                    text-white\r\n                    absolute\r\n                    top-12\r\n                    right-12\r\n                    font-bold\r\n                    cursor-pointer\r\n                    hover:text-gray-200\r\n                ",onClick:n[6]||(n[6]=e=>t.modal=!1)},"×"),l("a",{class:"cursor-pointer p-8 text-white font-bold",onClick:n[7]||(n[7]=e=>o.slide(-1))},"❮"),l("div",rn,[(i(!0),s(c,null,d(t.previews,((e,r)=>f((i(),s("img",{key:r,onClick:n[8]||(n[8]=e=>t.modal=!1),class:"w-full h-full object-contain cursor-pointer",src:e,alt:`imagen ${r}`},null,8,["src","alt"])),[[x,r==t.curSlide]]))),128))]),l("a",{class:"cursor-pointer p-8 text-white font-bold",onClick:n[9]||(n[9]=e=>o.slide(1))},"❯")],512),[[x,t.modal]])])}));We.render=an,We.__scopeId="data-v-208fa2c8";const tn={name:"CasaForm",components:{ImgDropMulti:We,DatePicker:U},props:{casa:{type:Object,default:function(){return{titulo:"",descripcion:"",comuna:"",ubicacion:"",fecha:new Date,imagenes:[],orientacion:""}}},guardando:Boolean},emits:["close","guardar"],data(){return{infoItem:{titulo:this.casa.titulo,descripcion:this.casa.descripcion,comuna:this.casa.comuna,fecha:this.casa.fecha},infoCasa:{ubicacion:this.casa.ubicacion,orientacion:this.casa.orientacion},imagenes:this.casa.imagenes,paBorrar:[],comunas:[],orientaciones:["Oriente","Poniente","Norte","Sur","Nororiente","Norponiente","Suroriente","Surponiente"]}},created(){b("https://apis.digital.gob.cl/dpa/comunas").then((e=>this.comunas=e.data.map((e=>e.nombre))))},methods:{handleSubmit(){let e=new FormData;this.imagenes.forEach((n=>{e.append("files",n)})),this.paBorrar.forEach((n=>{e.append("paBorrar",n)}));for(const[n,r]of Object.entries(this.infoItem))e.set(`item[${n}]`,r);for(const[n,r]of Object.entries(this.infoCasa))e.set(`casa[${n}]`,r);this.$emit("guardar",e)}}},on={class:"bg-white shadow rounded px-8 pt-6 pb-8 mb-4 flow-root"},sn={class:"mb-4"},ln=l("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"titulo"}," Título ",-1),cn={class:"mb-4"},dn=l("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"descripcion"}," Descripción ",-1),un={class:"mb-4"},pn=l("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"comuna"}," Comuna ",-1),mn={id:"lista-comuna"},gn={class:"mb-4"},hn=l("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"ubicacion"}," Ubicación ",-1),bn={class:"mb-6"},fn=l("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"fecha"}," Fecha ",-1),xn={class:"mb-4"},yn=l("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"orientacion"}," Orientación ",-1),vn=l("option",{value:"",disabled:"",selected:"",hidden:""}," Selecciona una orientación ",-1),kn={class:"float-right space-x-2"};tn.render=function(e,n,r,a,t,o){const u=p("DatePicker"),m=p("ImgDropMulti");return i(),s("form",on,[l("div",sn,[ln,f(l("input",{class:"\r\n                    appearance-none\r\n                    border\r\n                    rounded\r\n                    border-pink-200\r\n                    w-full\r\n                    py-1\r\n                    px-2\r\n                    text-gray-700\r\n                    leading-tight\r\n                    focus:outline-none\r\n                    focus:shadow-outline\r\n                    focus:ring-2\r\n                    focus:ring-pink-200\r\n                ",id:"titulo",type:"text",placeholder:"Título","onUpdate:modelValue":n[1]||(n[1]=e=>t.infoItem.titulo=e)},null,512),[[A,t.infoItem.titulo]])]),l("div",cn,[dn,f(l("textarea",{class:"\r\n                    appearance-none\r\n                    border\r\n                    rounded\r\n                    border-pink-200\r\n                    w-full\r\n                    py-1\r\n                    px-2\r\n                    text-gray-700\r\n                    leading-tight\r\n                    focus:outline-none\r\n                    focus:shadow-outline\r\n                    focus:ring-2\r\n                    focus:ring-pink-200\r\n                ",id:"descripcion",type:"text",placeholder:"Descripción","onUpdate:modelValue":n[2]||(n[2]=e=>t.infoItem.descripcion=e)},null,512),[[A,t.infoItem.descripcion]])]),l("div",un,[pn,f(l("input",{class:"\r\n                    appearance-none\r\n                    border\r\n                    rounded\r\n                    border-pink-200\r\n                    w-full\r\n                    py-1\r\n                    px-2\r\n                    text-gray-700\r\n                    leading-tight\r\n                    focus:outline-none\r\n                    focus:shadow-outline\r\n                    focus:ring-2\r\n                    focus:ring-pink-200\r\n                ",id:"comuna",placeholder:"Comuna",list:"lista-comuna","onUpdate:modelValue":n[3]||(n[3]=e=>t.infoItem.comuna=e)},null,512),[[A,t.infoItem.comuna]]),l("datalist",mn,[(i(!0),s(c,null,d(t.comunas,((e,n)=>(i(),s("option",{key:n,value:e},null,8,["value"])))),128))])]),l("div",gn,[hn,f(l("input",{class:"\r\n                    appearance-none\r\n                    border\r\n                    rounded\r\n                    border-pink-200\r\n                    w-full\r\n                    py-1\r\n                    px-2\r\n                    text-gray-700\r\n                    leading-tight\r\n                    focus:outline-none\r\n                    focus:shadow-outline\r\n                    focus:ring-2\r\n                    focus:ring-pink-200\r\n                ",id:"ubicacion",placeholder:"Ubicación","onUpdate:modelValue":n[4]||(n[4]=e=>t.infoCasa.ubicacion=e)},null,512),[[A,t.infoCasa.ubicacion]])]),l("div",bn,[fn,l(u,{modelValue:t.infoItem.fecha,"onUpdate:modelValue":n[5]||(n[5]=e=>t.infoItem.fecha=e),id:"fecha",mode:"dateTime",color:"pink"},null,8,["modelValue"])]),l("div",xn,[yn,f(l("select",{class:["border rounded border-pink-200 w-full py-1 px-2 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-pink-200",t.infoCasa.orientacion?"text-gray-700":"text-gray-400"],id:"orientacion","onUpdate:modelValue":n[6]||(n[6]=e=>t.infoCasa.orientacion=e)},[vn,(i(!0),s(c,null,d(t.orientaciones,((e,n)=>(i(),s("option",{class:"text-gray-700",key:n,value:e},h(`${e[0].toUpperCase()}${e.slice(1)}`),9,["value"])))),128))],2),[[z,t.infoCasa.orientacion]])]),l(m,{class:"mb-6",images:t.imagenes,"onUpdate:images":n[7]||(n[7]=e=>t.imagenes=e),paBorrar:t.paBorrar,"onUpdate:paBorrar":n[8]||(n[8]=e=>t.paBorrar=e)},null,8,["images","paBorrar"]),l("div",kn,[l("button",{class:"\r\n                    bg-gray-400\r\n                    hover:bg-gray-600\r\n                    text-white\r\n                    font-bold\r\n                    py-2\r\n                    px-4\r\n                    rounded\r\n                    focus:outline-none\r\n                    focus:shadow-outline\r\n                    focus:ring-2\r\n                    focus:ring-pink-200\r\n                ",type:"button",onClick:n[9]||(n[9]=n=>e.$emit("close"))}," Cancelar "),l("button",{class:["bg-pink-400 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-pink-200",{"animate-pulse":r.guardando}],type:"button",onClick:n[10]||(n[10]=(...e)=>o.handleSubmit&&o.handleSubmit(...e))}," Guardar ",2)])])};const wn={name:"EditIcon"},Cn={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},In=l("path",{d:"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"},null,-1),Bn=l("path",{d:"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"},null,-1);wn.render=function(e,n,r,a,t,o){return i(),s("svg",Cn,[In,Bn])};const Dn={name:"CasaList",components:{CasaForm:tn,EditIcon:wn,DeleteIcon:H,StarIcon:Z},props:{casas:Array},emits:["cargarCasas"],data:()=>({error:"",edit:"",guardando:!1,eliminando:"",destacando:""}),methods:{urlDev:e=>"http://localhost:3000/"+e,formatFecha:e=>new Date(e).toLocaleString(),async actualizarCasa(e){this.guardando=!0,await He.update(this.edit,e),this.edit="",this.guardando=!1,this.$emit("cargarCasas")},async eliminarCasa(e){this.eliminando=e,await He.delete(e),this.eliminando="",this.$emit("cargarCasas")},async cambiarDestacado(e,n){this.destacando=e,await He.destacar(e,{destacado:n}),this.destacando="",this.$emit("cargarCasas")}}},Sn={key:0,class:"error"},$n={class:"grid grid-cols-3 gap-4"},jn={key:1},Fn={class:"flex justify-between"},En={class:"text-xl"},Un={class:"text-sm text-gray-600"},An={class:"text-lg"},zn={class:"flex justify-end pt-3 space-x-2"};Dn.render=function(e,n,r,a,t,o){const u=p("CasaForm"),g=p("StarIcon"),b=p("EditIcon"),f=p("DeleteIcon");return i(),s(c,null,[t.error?(i(),s("p",Sn,h(t.error),1)):m("",!0),l("div",$n,[(i(!0),s(c,null,d(r.casas,(e=>(i(),s("div",{key:e._id,class:["border rounded p-5 bg-gray-100 shadow",{"col-span-full order-first":t.edit===e._id}]},[t.edit===e._id?(i(),s(u,{key:0,casa:e,guardando:t.guardando,onClose:n[1]||(n[1]=e=>t.edit=""),onGuardar:o.actualizarCasa},null,8,["casa","guardando","onGuardar"])):(i(),s("div",jn,[l("div",Fn,[l("h3",En,h(e.titulo),1),l("small",Un,h(e.estado),1)]),e.imagenes?(i(),s("img",{key:0,src:o.urlDev(e.imagenes[0]),alt:e.titulo},null,8,["src","alt"])):m("",!0),l("h4",An,h(e.item.descripcion),1),l("p",null,h(e.item.ubicacion),1),l("p",null,h(o.formatFecha(e.fecha)),1),l("div",zn,[l(g,{class:["text-dorado",t.destacando==e._id?"animate-bounce":"cursor-pointer",{"fill-current":e.destacado}],onClick:n=>o.cambiarDestacado(e._id,!e.destacado)},null,8,["class","onClick"]),l(b,{class:"text-blue-400 cursor-pointer",onClick:n=>t.edit=e._id},null,8,["onClick"]),l(f,{class:["text-rojo",t.eliminando==e._id?"animate-bounce":"cursor-pointer"],onClick:n=>o.eliminarCasa(e._id)},null,8,["class","onClick"])])]))],2)))),128))])],64)};const On={name:"CasaMain",components:{CasaForm:tn,CasaList:Dn},data:()=>({casas:[],nuevo:!1,guardando:!1}),methods:{async cargarCasas(){this.casas=await He.todo()},async crearCasa(e){this.guardando=!0,await He.create(e),this.guardando=!1,this.nuevo=!1,this.cargarCasas()}},created(){this.cargarCasas()}},_n={class:"container mx-auto pb-10 space-y-4"};On.render=function(e,n,r,a,t,o){const c=p("CasaForm"),d=p("CasaList");return i(),s("div",_n,[t.nuevo?(i(),s(c,{key:1,guardando:t.guardando,onClose:n[2]||(n[2]=e=>t.nuevo=!1),onGuardar:o.crearCasa},null,8,["guardando","onGuardar"])):(i(),s("button",{key:0,class:"\r\n                w-full\r\n                border border-pink-600\r\n                rounded\r\n                px-5\r\n                hover:bg-pink-600 hover:shadow\r\n                text-pink-600\r\n                hover:text-white\r\n                text-xl\r\n                uppercase\r\n                font-bold\r\n            ",onClick:n[1]||(n[1]=e=>t.nuevo=!0)}," Nueva Casa ")),l(d,{casas:t.casas,onCargarCasas:o.cargarCasas},null,8,["casas","onCargarCasas"])])};const qn="http://localhost:3000/api/banners/";class Mn{static async index(){return await b.get(qn).then((e=>e.data)).catch((e=>console.error(e)))}static async create(e){return await b.post(qn,e).then((e=>console.log(e))).catch((e=>console.error(e)))}static async update(e,n){return await b.post(`${qn}${e}/editar`,n).then((e=>console.log(e))).catch((e=>console.error(e)))}static async delete(e){return await b.delete(`${qn}${e}`).then((e=>{console.log(e)})).catch((e=>{console.error(e)}))}}const Vn={name:"ImgDropSingle",components:{UploadIcon:R},props:["image"],emits:["update"],data(){return{preview:this.urlDev(this.image),dragging:!1,hovering:!1}},methods:{urlDev:e=>"http://localhost:3000/"+e,drop(e){this.addFile(e.dataTransfer.files[0]),this.dragging=!1},addFile(e){this.preview=URL.createObjectURL(e),this.$emit("update",e)}}},Pn={class:"relative"},Gn=l("p",null,"Haz click o arrastra tu imagen aquí",-1);Vn.render=function(e,n,r,a,t,o){const c=p("UploadIcon");return i(),s("div",{id:"upload",class:["relative w-full h-full mx-auto p-6 bg-gray-50 border-4 border-dashed border-gray-300 rounded-lg transition-colors duration-200 ease-out",{" border-blue-200":t.dragging}],onDragover:n[4]||(n[4]=S((e=>t.dragging=t.hovering=!0),["prevent"])),onDragleave:n[5]||(n[5]=S((e=>t.dragging=t.hovering=!1),["prevent"])),onDrop:n[6]||(n[6]=S((e=>o.drop(e)),["prevent"]))},[l("input",{class:"w-full h-full opacity-0 absolute inset-0 z-20 cursor-pointer",type:"file",accept:"image/*",onChange:n[1]||(n[1]=e=>o.addFile(e.target.files[0])),onMouseenter:n[2]||(n[2]=e=>t.hovering=!0),onMouseleave:n[3]||(n[3]=e=>t.hovering=!1)},null,32),l("div",Pn,[l("img",{class:"w-full object-contain rounded-lg shadow-inner",src:t.preview,alt:""},null,8,["src"]),l("div",{class:["flex flex-col justify-center items-center text-center rounded-lg transition-all duration-300 ease-out",t.preview?" absolute inset-0 z-10 bg-black text-gray-200"+(t.hovering?" opacity-100 bg-opacity-50":" opacity-0"):" text-gray-500"]},[l(c,{class:"w-36"}),Gn],2)])],34)};const Ln={name:"BannerForm",components:{ImgDropSingle:Vn},props:{banner:{type:Object,default:function(){return{tituloBanner:"",imagenBanner:"",urlBanner:""}}},guardando:Boolean},emits:["close","guardar"],data(){return{tituloBanner:this.banner.tituloBanner,imagenBanner:this.banner.imagenBanner,urlBanner:this.banner.urlBanner}},methods:{handleSubmit(){let e=new FormData;e.set("file",this.imagenBanner),e.set("tituloBanner",this.tituloBanner),e.set("urlBanner",this.urlBanner),this.$emit("guardar",e)}}},Tn={class:"mb-4"},Nn=l("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"tituloBanner"}," Título ",-1),Rn={class:"mb-4"},Hn=l("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"urlBanner"}," Url ",-1),Wn={class:"float-right space-x-2"};Ln.render=function(e,n,r,a,t,o){const c=p("ImgDropSingle");return i(),s("form",{class:["bg-white shadow rounded px-8 pt-6 pb-8 mb-4 flow-root",{"mx-auto w-1/2":0===r.banner.tituloBanner.length}]},[l("div",Tn,[Nn,f(l("input",{class:"\r\n                    appearance-none\r\n                    border\r\n                    rounded\r\n                    border-pink-200\r\n                    w-full\r\n                    py-1\r\n                    px-2\r\n                    text-gray-700\r\n                    leading-tight\r\n                    focus:outline-none\r\n                    focus:shadow-outline\r\n                    focus:ring-2\r\n                    focus:ring-pink-200\r\n                ",id:"tituloBanner",type:"text",placeholder:"Título","onUpdate:modelValue":n[1]||(n[1]=e=>t.tituloBanner=e)},null,512),[[A,t.tituloBanner]])]),l("div",null,[l(c,{class:"mb-6",image:t.imagenBanner,onUpdate:n[2]||(n[2]=e=>t.imagenBanner=e)},null,8,["image"])]),l("div",Rn,[Hn,f(l("input",{class:"\r\n                    appearance-none\r\n                    border\r\n                    rounded\r\n                    border-pink-200\r\n                    w-full\r\n                    py-1\r\n                    px-2\r\n                    text-gray-700\r\n                    leading-tight\r\n                    focus:outline-none\r\n                    focus:shadow-outline\r\n                    focus:ring-2\r\n                    focus:ring-pink-200\r\n                ",id:"urlBanner",type:"text",placeholder:"Url","onUpdate:modelValue":n[3]||(n[3]=e=>t.urlBanner=e)},null,512),[[A,t.urlBanner]])]),l("div",Wn,[l("button",{class:"\r\n                    bg-gray-400\r\n                    hover:bg-gray-600\r\n                    text-white\r\n                    font-bold\r\n                    py-2\r\n                    px-4\r\n                    rounded\r\n                    focus:outline-none\r\n                    focus:shadow-outline\r\n                    focus:ring-2\r\n                    focus:ring-pink-200\r\n                ",type:"button",onClick:n[4]||(n[4]=n=>e.$emit("close"))}," Cancelar "),l("button",{class:["bg-pink-400 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-pink-200",{"animate-pulse":r.guardando}],type:"button",onClick:n[5]||(n[5]=(...e)=>o.handleSubmit&&o.handleSubmit(...e))}," Guardar ",2)])],2)};const Zn="http://localhost:3000/api/agenda/";class Qn{static async index(){return await b.get(Zn).then((e=>e.data)).catch((e=>console.error(e)))}static async create(e){return await b.post(Zn,e).then((e=>console.log(e))).catch((e=>console.error(e)))}static async delete(e){return await b.delete(`${Zn}${e}`).then((e=>{console.log(e)})).catch((e=>{console.error(e)}))}}const Jn={name:"EventoForm",components:{DatePicker:U},props:{idBanner:String,agenda:{type:Object,default:function(){return{ubicacion:"",fechaIni:"",fechaFin:"",horario:!1,recurrencia:"",iteracion:""}}},guardando:Boolean},emits:["cerrar","guardar"],data(){return{ubicaciones:[],recurrencias:["continuado","semanal"],ubicacion:this.agenda.ubicacion,fechas:{start:new Date(this.agenda.fechaIni),end:new Date(this.agenda.fechaFin)},datePickerConfig:{start:{timeAdjust:"00:00:00"},end:{timeAdjust:"23:55:00"}},horario:this.agenda.horario,recurrencia:this.agenda.recurrencia,iteracion:this.agenda.iteracion}},created(){b("http://localhost:3000/api/ubicaciones").then((e=>this.ubicaciones=e.data)).catch((e=>console.error(e)))},methods:{handleSubmit(){let e={ubicacion:this.ubicacion,idBanner:this.idBanner,fechaIni:this.fechas.start.toISOString(),fechaFin:this.fechas.end.toISOString(),horario:this.horario,recurrencia:this.recurrencia,iteracion:this.iteracion};this.$emit("guardar",e)}}},Kn={class:"bg-white shadow rounded px-8 pt-6 pb-8 mb-4 flow-root"},Xn={class:"mb-4"},Yn=l("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"ubicacion"}," Ubicación ",-1),er=l("option",{value:"",disabled:"",selected:"",hidden:""}," Selecciona una ubicación ",-1),nr={class:"mb-4"},rr=l("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"fechas"}," Rango de fechas ",-1),ar={class:"mb-4"},tr=l("label",{class:"ml-3 text-gray-700 text-sm font-bold mb-2",for:"horario"}," Aplicar horario cada día ",-1),or={class:"mb-4"},ir=l("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"recurrencia"}," Recurrencia ",-1),sr=l("option",{value:"",disabled:"",selected:"",hidden:""}," Selecciona un tipo de recurrencia ",-1),lr={class:"mb-4"},cr=l("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"iteracion"}," Repeticiones ",-1),dr={class:"float-right space-x-2"};Jn.render=function(e,n,r,a,t,o){const u=p("DatePicker");return i(),s("form",Kn,[l("div",Xn,[Yn,f(l("select",{class:["border rounded border-pink-200 w-full py-1 px-2 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-pink-200",t.ubicacion?"text-gray-700":"text-gray-400"],id:"ubicacion","onUpdate:modelValue":n[1]||(n[1]=e=>t.ubicacion=e)},[er,(i(!0),s(c,null,d(t.ubicaciones,((e,n)=>(i(),s("option",{class:"text-gray-700",key:n,value:e},h(`${e[0].toUpperCase()}${e.slice(1)}`),9,["value"])))),128))],2),[[z,t.ubicacion]])]),l("div",nr,[rr,l(u,{id:"fechas",mode:"dateTime","is-range":"","minute-increment":5,"min-date":new Date,color:"pink","model-config":t.datePickerConfig,modelValue:t.fechas,"onUpdate:modelValue":n[2]||(n[2]=e=>t.fechas=e)},null,8,["min-date","model-config","modelValue"])]),l("div",ar,[f(l("input",{class:"\r\n                    border\r\n                    rounded\r\n                    border-pink-200\r\n                    h-4\r\n                    w-4\r\n                    text-gray-700\r\n                    focus:ring-2 focus:ring-pink-200\r\n                ",id:"horario",type:"checkbox","onUpdate:modelValue":n[3]||(n[3]=e=>t.horario=e)},null,512),[[O,t.horario]]),tr]),l("div",or,[ir,f(l("select",{class:["border rounded border-pink-200 w-full py-1 px-2 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-pink-200",t.recurrencia?"text-gray-700":"text-gray-400"],id:"recurrencia","onUpdate:modelValue":n[4]||(n[4]=e=>t.recurrencia=e)},[sr,(i(!0),s(c,null,d(t.recurrencias,((e,n)=>(i(),s("option",{class:"text-gray-700",key:n,value:e},h(`${e[0].toUpperCase()}${e.slice(1)}`),9,["value"])))),128))],2),[[z,t.recurrencia]])]),f(l("div",lr,[cr,f(l("input",{class:"\r\n                    border\r\n                    rounded\r\n                    border-pink-200\r\n                    w-full\r\n                    py-1\r\n                    px-2\r\n                    text-gray-700\r\n                    leading-tight\r\n                    focus:outline-none focus:ring-2 focus:ring-pink-200\r\n                ",id:"iteracion",type:"number",placeholder:"Número de repeticiones","onUpdate:modelValue":n[5]||(n[5]=e=>t.iteracion=e)},null,512),[[A,t.iteracion]])],512),[[x,t.recurrencia&&"continuado"!==t.recurrencia]]),l("div",dr,[l("button",{class:"\r\n                    bg-gray-400\r\n                    hover:bg-gray-600\r\n                    text-white\r\n                    font-bold\r\n                    py-2\r\n                    px-4\r\n                    rounded\r\n                    focus:outline-none\r\n                    focus:shadow-outline\r\n                    focus:ring-2\r\n                    focus:ring-pink-200\r\n                ",type:"button",onClick:n[6]||(n[6]=n=>e.$emit("cerrar"))}," Cancelar "),l("button",{class:["bg-pink-400 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-pink-200",{"animate-pulse":r.guardando}],type:"button",onClick:n[7]||(n[7]=(...e)=>o.handleSubmit&&o.handleSubmit(...e))}," Guardar ",2)])])};const ur={name:"BannerAgenda",components:{EventoForm:Jn,DeleteIcon:H},props:{idBanner:String,agenda:Array},emits:["cargarBanners"],data:()=>({nuevo:!1,guardando:!1,eliminando:"",error:""}),methods:{formatFecha:e=>new Date(e).toLocaleString(),async agendar(e){this.guardando=!0;try{await Qn.create(e),this.nuevo=!1,this.$emit("cargarBanners")}catch(n){console.error(n)}this.guardando=!1},async eliminarEvento(e){if(this.eliminando=e,window.confirm("¿Eliminar evento?"))try{await Qn.delete(e),this.$emit("cargarBanners")}catch(n){console.error(n)}this.eliminando=""}}},pr=E();j("data-v-5d8dee7a");const mr={class:"divide-y"},gr=u(" Ubicación: "),hr=u(" Fecha de inicio: "),br=u(" Fecha de fin: "),fr=u(" Con horario: "),xr=u(" Recurrencia: "),yr={key:0},vr=u(" Semanas restantes: "),kr={class:"mt-auto flex justify-end pt-3 space-x-2"};F();const wr=pr(((e,n,r,a,t,o)=>{const u=p("EventoForm"),g=p("DeleteIcon");return i(),s(c,null,[t.nuevo?(i(),s(u,{key:1,idBanner:r.idBanner,guardando:t.guardando,onGuardar:o.agendar,onCerrar:n[2]||(n[2]=e=>t.nuevo=!1)},null,8,["idBanner","guardando","onGuardar"])):(i(),s("button",{key:0,class:"\r\n            mb-5\r\n            px-4\r\n            py-2\r\n            bg-pink-400\r\n            text-white\r\n            font-bold\r\n            rounded\r\n            hover:bg-pink-600\r\n        ",onClick:n[1]||(n[1]=e=>t.nuevo=!0)}," Agregar Evento ")),(i(!0),s(c,null,d(r.agenda,((e,n)=>(i(),s("div",{key:n,class:"bg-white shadow rounded px-8 py-6 mb-4"},[l("ul",mr,[l("li",null,[gr,l("span",null,h(e.ubicacion),1)]),l("li",null,[hr,l("span",null,h(o.formatFecha(e.fechaIni)),1)]),l("li",null,[br,l("span",null,h(o.formatFecha(e.fechaFin)),1)]),l("li",null,[fr,l("span",null,h(e.horario?"Sí":"No"),1)]),l("li",null,[xr,l("span",null,h(e.recurrencia),1)]),"semanal"===e.recurrencia?(i(),s("li",yr,[vr,l("span",null,h(e.iteracion),1)])):m("",!0)]),l("div",kr,[l(g,{class:["text-red-500",t.eliminando==e._id?"animate-bounce":"cursor-pointer"],onClick:n=>o.eliminarEvento(e._id)},null,8,["class","onClick"])])])))),128)),l("button",{class:"\r\n            mt-auto\r\n            px-4\r\n            py-2\r\n            bg-gray-400\r\n            text-white\r\n            font-bold\r\n            rounded\r\n            hover:bg-gray-600\r\n        ",type:"button",onClick:n[3]||(n[3]=n=>e.$emit("cerrar"))}," Volver ")],64)}));ur.render=wr,ur.__scopeId="data-v-5d8dee7a";const Cr={name:"CalendarIcon"},Ir={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-calendar"},Br=l("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},null,-1),Dr=l("path",{d:"M16 2v4M8 2v4M3 10h18"},null,-1);Cr.render=function(e,n,r,a,t,o){return i(),s("svg",Ir,[Br,Dr])};const Sr={name:"BannerList",components:{BannerForm:Ln,BannerAgenda:ur,EditIcon:wn,DeleteIcon:H,CalendarIcon:Cr},props:{banners:Array},emits:["cargarBanners"],data:()=>({edit:"",guardando:!1,eliminando:"",error:"",agenda:""}),methods:{urlDev:e=>"http://localhost:3000/"+e,async actualizarBanner(e){this.guardando=!0;try{await Mn.update(this.edit,e),this.edit="",this.$emit("cargarBanners")}catch(n){console.error(n)}this.guardando=!1},async borrarBanner(e){if(this.eliminando=e,window.confirm("¿Eliminar banner?"))try{await Mn.delete(e),this.$emit("cargarBanners")}catch(n){console.error(n)}this.eliminando=""}}},$r={key:0,class:"error"},jr={class:"grid grid-cols-3 gap-4"},Fr={class:"text-xl mb-2"},Er={key:2,class:"flex-grow flex flex-col justify-between text-center"},Ur={class:"mt-auto flex justify-end pt-3 space-x-2"};Sr.render=function(e,n,r,a,t,o){const u=p("BannerForm"),g=p("BannerAgenda"),b=p("CalendarIcon"),f=p("EditIcon"),x=p("DeleteIcon");return i(),s(c,null,[t.error?(i(),s("p",$r,h(t.error),1)):m("",!0),l("div",jr,[(i(!0),s(c,null,d(r.banners,(r=>(i(),s("div",{key:r._id,class:"flex flex-col border rounded p-5 bg-gray-100 shadow"},[l("h2",Fr,h(r.tituloBanner),1),t.edit==r._id?(i(),s(u,{key:0,banner:r,guardando:t.guardando,onClose:n[1]||(n[1]=e=>t.edit=""),onGuardar:o.actualizarBanner},null,8,["banner","guardando","onGuardar"])):t.agenda===r._id?(i(),s(g,{key:1,idBanner:r._id,agenda:r.agenda,onCerrar:n[2]||(n[2]=e=>t.agenda=""),onCargarBanners:n[3]||(n[3]=n=>e.$emit("cargarBanners"))},null,8,["idBanner","agenda"])):(i(),s("div",Er,[l("div",null,[l("img",{class:"mb-2 mx-auto rounded-lg",src:o.urlDev(r.imagenBanner),alt:r.tituloBanner},null,8,["src","alt"]),l("a",{href:r.urlBanner},h(r.urlBanner),9,["href"])]),l("div",Ur,[l(b,{class:"text-blue-400 cursor-pointer",onClick:e=>t.agenda=r._id},null,8,["onClick"]),l(f,{class:"text-yellow-400 cursor-pointer",onClick:e=>t.edit=r._id},null,8,["onClick"]),l(x,{class:["text-red-500",t.eliminando==r._id?"animate-bounce":"cursor-pointer"],onClick:e=>o.borrarBanner(r._id)},null,8,["class","onClick"])])]))])))),128))])],64)};const Ar={name:"BannerMain",components:{BannerForm:Ln,BannerList:Sr},data:()=>({banners:[],nuevo:!1,guardando:!1,error:""}),created(){this.cargarBanners()},methods:{async cargarBanners(){try{this.banners=await Mn.index()}catch(e){this.error=e.message}},async crearBanner(e){this.guardando=!0,await Mn.create(e),this.guardando=!1,this.nuevo=!1,this.cargarBanners()}}},zr={class:"container mx-auto pb-10"},Or={key:0,class:"text-center bg-red-200 mb-5 p-4 rounded shadow"};Ar.render=function(e,n,r,a,t,o){const c=p("BannerForm"),d=p("BannerList");return i(),s("div",zr,[t.error?(i(),s("div",Or,h(t.error),1)):m("",!0),t.nuevo?(i(),s(c,{key:2,guardando:t.guardando,onClose:n[2]||(n[2]=e=>t.nuevo=!1),onGuardar:o.crearBanner},null,8,["guardando","onGuardar"])):(i(),s("button",{key:1,class:"\r\n                w-full\r\n                border border-pink-600\r\n                rounded\r\n                mb-5\r\n                px-5\r\n                hover:bg-pink-600 hover:shadow\r\n                text-pink-600\r\n                hover:text-white\r\n                text-xl\r\n                uppercase\r\n                font-bold\r\n            ",onClick:n[1]||(n[1]=e=>t.nuevo=!0)}," Nuevo Banner ")),l(d,{banners:t.banners,onCargarBanners:o.cargarBanners},null,8,["banners","onCargarBanners"])])};const _r={name:"BannerTest",data:()=>({banners:{principal:"",ladito:""}}),created(){b(this.urlDev("api/banners/principal")).then((e=>this.banners.principal=this.urlDev(e.data.imagenBanner))).catch((e=>console.error(e))),b(this.urlDev("api/banners/ladito")).then((e=>this.banners.ladito=this.urlDev(e.data.imagenBanner))).catch((e=>console.error(e)))},methods:{urlDev:e=>"http://localhost:3000/"+e}},qr={class:"container mx-auto flex flex-col items-center"},Mr=l("h1",{class:"mb-14 text-3xl"},"Serial Experiments Banners",-1),Vr={class:"mb-2 text-xl capitalize"};_r.render=function(e,n,r,a,t,o){return i(),s("div",qr,[Mr,(i(!0),s(c,null,d(t.banners,((e,n)=>(i(),s("figure",{key:n,class:"mb-10"},[l("figcaption",Vr,h(n),1),l("img",{src:e,alt:`banner ${n}`,width:"336"},null,8,["src","alt"])])))),128))])};const Pr={name:"NotFound"};Pr.render=function(e,n,r,a,t,o){return i(),s("h1",null,"Error 404: No encontrado")};const Gr=[{path:"/panel/items",component:Le},{path:"/panel/casa",component:On},{path:"/panel/banners",component:Ar},{path:"/panel/banner_test",component:_r},{path:"/panel/:pathMatch(.*)",component:Pr}],Lr=_({history:q(),routes:Gr});M(Q).use(Lr).mount("body");
