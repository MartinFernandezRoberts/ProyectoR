import{o as n,c as e,b as a,w as r,F as t,j as o,r as i,C as s,P as l,p as c,k as d,g as u,h as p,n as g,q as h,l as m,D as b,v as f,E as x,t as y,i as v,G as w,y as k,z as C,B}from"./vendor.5695de00.js";/* empty css              */const I={name:"Panel"},D={class:"\r\n            flex\r\n            items-center\r\n            justify-between\r\n            flex-wrap\r\n            bg-black\r\n            p-6\r\n            mb-10\r\n            text-white\r\n        "},$=a("div",{class:"flex items-center"},[a("a",{class:"text-xl font-bold",href:"/"},"ProyectoR"),a("h2",null,[a("span",{class:"text-pink-600 font-bold mx-1"}," >"),o("Panel de Control ")])],-1),S=o(" Casa "),F=a("span",{class:"mx-2"},"|",-1),j=o(" Banners "),U=a("span",{class:"mx-2"},"|",-1),_=o(" Banner Test ");I.render=function(o,s,l,c,d,u){const p=i("router-link"),g=i("router-view");return n(),e(t,null,[a("nav",D,[$,a("div",null,[a(p,{to:"/panel/casa","active-class":"text-pink-600 font-bold"},{default:r((()=>[S])),_:1}),F,a(p,{to:"/panel/banners","active-class":"text-pink-600 font-bold"},{default:r((()=>[j])),_:1}),U,a(p,{to:"/panel/banner_test","active-class":"text-pink-600 font-bold"},{default:r((()=>[_])),_:1})])]),a(g)],64)};const E="http://localhost:3000/api/casas/";class M{static async index(){return await s.get(E).then((n=>n.data)).catch((n=>console.error(n)))}static async create(n){return await s.post(E,n).then((n=>console.log(n))).catch((n=>console.error(n)))}static async update(n,e){return await s.post(`${E}${n}/editar`,e).then((n=>console.log(n))).catch((n=>console.error(n)))}static async destacar(n,e){return await s.post(`${E}${n}/destacar`,e).then((n=>console.log(n))).catch((n=>console.error(n)))}static async delete(n){return await s.delete(`${E}${n}`).then((n=>{console.log(n)})).catch((n=>{console.error(n)}))}}const V={name:"UploadIcon"},G={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",stroke:"currentColor"},L=a("g",{"data-name":"Upload Image"},[a("g",{"data-name":"<Group>"},[a("g",{"data-name":"<Group>"},[a("g",{"data-name":"<Group>"},[a("circle",{"data-name":"<Path>",cx:"18.5",cy:"16.5",r:"5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"})]),a("path",{"data-name":"<Path>",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 15.5l2-2 2 2M18.5 13.5v6"})]),a("g",{"data-name":"<Group>",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},[a("path",{"data-name":"<Path>",d:"M.6 15.42l5.4-5.4L8.98 13"}),a("path",{"data-name":"<Path>",d:"M17.16 11.68L12.5 7.02l-4.73 4.77"}),a("circle",{"data-name":"<Path>",cx:"8",cy:"6.02",r:"1.5"}),a("path",{"data-name":"<Path>",d:"M19.5 11.6V4A1.5 1.5 0 0018 2.5H2A1.5 1.5 0 00.5 4v11A1.5 1.5 0 002 16.5h11.5"})])])],-1);V.render=function(a,r,t,o,i,s){return n(),e("svg",G,[L])};const P={name:"DeleteIcon"},z={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},A=a("circle",{cx:"12",cy:"12",r:"10"},null,-1),T=a("path",{d:"M15 9l-6 6M9 9l6 6"},null,-1);P.render=function(a,r,t,o,i,s){return n(),e("svg",z,[A,T])};const O={name:"ZoomIcon"},N={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},R=a("circle",{cx:"11",cy:"11",r:"8"},null,-1),H=a("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"},null,-1),q=a("line",{x1:"11",y1:"8",x2:"11",y2:"14"},null,-1),Z=a("line",{x1:"8",y1:"11",x2:"14",y2:"11"},null,-1);O.render=function(a,r,t,o,i,s){return n(),e("svg",N,[R,H,q,Z])};const J={name:"StarIcon"},K={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Q=a("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"},null,-1);J.render=function(a,r,t,o,i,s){return n(),e("svg",K,[Q])};const W={name:"MultiImgDrop",components:{UploadIcon:V,DeleteIcon:P,ZoomIcon:O,StarIcon:J},props:{images:{type:Array,default:function(){return[]}},paBorrar:{type:Array,default:function(){return[]}}},emits:["update:images","update:paBorrar"],data(){return{storedImages:this.images,previews:this.images.map((n=>this.urlDev(n))),dragging:!1,modal:!1,curSlide:0,featured:0,scrollbar:null}},computed:{notEmpty(){return this.previews.length>0}},mounted(){this.scrollbar=new l("#previews"),this.$emit("update:images",[])},methods:{urlDev:n=>"http://localhost:3000/"+n,drop(n){this.addFiles(n.dataTransfer.files),this.dragging=!1},addFiles(n){const e=this.images,a=this;for(let r=0;r<n.length;r++){const t=n[r];a.previews.push(URL.createObjectURL(t)),e.push(t)}this.$emit("update:images",e),setTimeout((()=>{this.scrollbar.update()}),100)},rmFile(n){if(n<this.featured?this.featured--:n==this.featured&&(this.featured=0),n>=this.storedImages.length){const e=this.images;e.splice(n,1),this.$emit("update:images",e)}else{const e=this.paBorrar.concat(this.storedImages.splice(n,1));this.$emit("update:paBorrar",e)}this.previews.splice(n,1),this.$nextTick((function(){this.scrollbar.update()}))},clear(){this.previews.length=0,this.$emit("update:images",[])},openLightbox(n){this.curSlide=n,this.modal=!0},slide(n){(n+=this.curSlide)<0?n=this.images.length-1:n==this.images.length&&(n=0),this.curSlide=n}}},X=m();c("data-v-2d8c7e7c");const Y={class:"mx-auto"},nn={class:"\r\n                    flex flex-col\r\n                    justify-center\r\n                    items-center\r\n                    text-center text-gray-500\r\n                    rounded-lg\r\n                "},en=a("p",null,"Haz click o arrastra tus imágenes aquí",-1),an={class:"mt-4 border-2 rounded shadow-inner"},rn={id:"previews",class:"relative px-3 py-4 z-20 flex h-52 flex-nowrap"},tn={id:"controls",class:"\r\n                                absolute\r\n                                w-full\r\n                                h-full\r\n                                flex flex-col\r\n                                justify-around\r\n                                items-center\r\n                                opacity-0\r\n                                rounded\r\n                                bg-black bg-opacity-50\r\n                                hover:opacity-100\r\n                                transition-opacity\r\n                                duration-300\r\n                                ease-out\r\n                            "},on={id:"lightbox",class:"\r\n                fixed\r\n                z-20\r\n                inset-0\r\n                text-3xl\r\n                bg-black bg-opacity-75\r\n                flex\r\n                justify-between\r\n                items-center\r\n            "},sn={class:"w-4/5 h-full"};d();const ln=X(((r,o,s,l,c,d)=>{const m=i("UploadIcon"),b=i("StarIcon"),f=i("ZoomIcon"),x=i("DeleteIcon");return n(),e("div",Y,[a("div",{class:["relative p-6 bg-gray-50 border-4 border-dashed border-gray-300 rounded-lg transition-colors duration-200 ease-out",{" border-blue-200":c.dragging}],onDragover:o[3]||(o[3]=h((n=>c.dragging=!0),["prevent"])),onDragleave:o[4]||(o[4]=h((n=>c.dragging=!1),["prevent"])),onDrop:o[5]||(o[5]=h((n=>d.drop(n)),["prevent"]))},[u(a("button",{class:"\r\n                    relative\r\n                    px-2\r\n                    z-20\r\n                    border border-gray-300\r\n                    rounded\r\n                    text-gray-300\r\n                    font-bold\r\n                    hover:border-0 hover:bg-gray-300 hover:text-white\r\n                ",type:"button",onClick:o[1]||(o[1]=(...n)=>d.clear&&d.clear(...n))}," limpiar ",512),[[p,d.notEmpty]]),a("input",{class:"\r\n                    w-full\r\n                    h-full\r\n                    opacity-0\r\n                    absolute\r\n                    inset-0\r\n                    z-10\r\n                    cursor-pointer\r\n                ",type:"file",accept:"image/*",onChange:o[2]||(o[2]=n=>d.addFiles(n.target.files)),multiple:""},null,32),a("div",nn,[a(m,{class:["stroke-current",d.notEmpty?"w-14":"w-36"]},null,8,["class"]),en]),u(a("div",an,[a("div",rn,[(n(!0),e(t,null,g(c.previews,((r,t)=>(n(),e("div",{key:t,class:["relative h-full flex-none",{"rounded ring-4 ring-yellow-300":c.featured==t,"ml-4":t>0}]},[a("div",tn,[a(b,{class:["text-yellow-300 cursor-pointer",{"fill-current":c.featured===t}],onClick:n=>c.featured=t},null,8,["class","onClick"]),a(f,{class:"text-white cursor-pointer",onClick:n=>d.openLightbox(t)},null,8,["onClick"]),a(x,{class:"text-red-500 cursor-pointer",onClick:n=>d.rmFile(t)},null,8,["onClick"])]),a("img",{class:"object-cover h-full rounded",src:r,alt:`imagen ${t}`},null,8,["src","alt"])],2)))),128))])],512),[[p,d.notEmpty]])],34),u(a("div",on,[a("span",{class:"\r\n                    text-white\r\n                    absolute\r\n                    top-12\r\n                    right-12\r\n                    font-bold\r\n                    cursor-pointer\r\n                    hover:text-gray-200\r\n                ",onClick:o[6]||(o[6]=n=>c.modal=!1)},"×"),a("a",{class:"cursor-pointer p-8 text-white font-bold",onClick:o[7]||(o[7]=n=>d.slide(-1))},"❮"),a("div",sn,[(n(!0),e(t,null,g(c.previews,((a,r)=>u((n(),e("img",{key:r,onClick:o[8]||(o[8]=n=>c.modal=!1),class:"w-full h-full object-contain cursor-pointer",src:a,alt:`imagen ${r}`},null,8,["src","alt"])),[[p,r==c.curSlide]]))),128))]),a("a",{class:"cursor-pointer p-8 text-white font-bold",onClick:o[9]||(o[9]=n=>d.slide(1))},"❯")],512),[[p,c.modal]])])}));W.render=ln,W.__scopeId="data-v-2d8c7e7c";const cn={name:"CasaForm",components:{ImgDropMulti:W,DatePicker:b},props:{casa:{type:Object,default:function(){return{titulo:"",descripcion:"",comuna:"",ubicacion:"",fecha:new Date,imagenes:[],orientacion:""}}},guardando:Boolean},emits:["close","guardar"],data(){return{infoItem:{titulo:this.casa.titulo,descripcion:this.casa.descripcion,comuna:this.casa.comuna,fecha:this.casa.fecha},infoCasa:{ubicacion:this.casa.ubicacion,orientacion:this.casa.orientacion},imagenes:this.casa.imagenes,paBorrar:[],comunas:[],orientaciones:["Oriente","Poniente","Norte","Sur","Nororiente","Norponiente","Suroriente","Surponiente"]}},created(){s("https://apis.digital.gob.cl/dpa/comunas").then((n=>this.comunas=n.data.map((n=>n.nombre))))},methods:{handleSubmit(){let n=new FormData;this.imagenes.forEach((e=>{n.append("files",e)})),this.paBorrar.forEach((e=>{n.append("paBorrar",e)}));for(const[e,a]of Object.entries(this.infoItem))n.set(`item[${e}]`,a);for(const[e,a]of Object.entries(this.infoCasa))n.set(`casa[${e}]`,a);this.$emit("guardar",n)}}},dn={class:"bg-white shadow rounded px-8 pt-6 pb-8 mb-4 flow-root"},un={class:"mb-4"},pn=a("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"titulo"}," Título ",-1),gn={class:"mb-4"},hn=a("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"descripcion"}," Descripción ",-1),mn={class:"mb-4"},bn=a("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"comuna"}," Comuna ",-1),fn={id:"lista-comuna"},xn={class:"mb-4"},yn=a("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"ubicacion"}," Ubicación ",-1),vn={class:"mb-6"},wn=a("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"fecha"}," Fecha ",-1),kn={class:"mb-4"},Cn=a("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"orientacion"}," Orientación ",-1),Bn=a("option",{value:"",disabled:"",selected:"",hidden:""}," Selecciona una orientación ",-1),In={class:"float-right space-x-2"};cn.render=function(r,o,s,l,c,d){const p=i("DatePicker"),h=i("ImgDropMulti");return n(),e("form",dn,[a("div",un,[pn,u(a("input",{class:"\r\n                    appearance-none\r\n                    border\r\n                    rounded\r\n                    border-pink-200\r\n                    w-full\r\n                    py-1\r\n                    px-2\r\n                    text-gray-700\r\n                    leading-tight\r\n                    focus:outline-none\r\n                    focus:shadow-outline\r\n                    focus:ring-2\r\n                    focus:ring-pink-200\r\n                ",id:"titulo",type:"text",placeholder:"Título","onUpdate:modelValue":o[1]||(o[1]=n=>c.infoItem.titulo=n)},null,512),[[f,c.infoItem.titulo]])]),a("div",gn,[hn,u(a("textarea",{class:"\r\n                    appearance-none\r\n                    border\r\n                    rounded\r\n                    border-pink-200\r\n                    w-full\r\n                    py-1\r\n                    px-2\r\n                    text-gray-700\r\n                    leading-tight\r\n                    focus:outline-none\r\n                    focus:shadow-outline\r\n                    focus:ring-2\r\n                    focus:ring-pink-200\r\n                ",id:"descripcion",type:"text",placeholder:"Descripción","onUpdate:modelValue":o[2]||(o[2]=n=>c.infoItem.descripcion=n)},null,512),[[f,c.infoItem.descripcion]])]),a("div",mn,[bn,u(a("input",{class:"\r\n                    appearance-none\r\n                    border\r\n                    rounded\r\n                    border-pink-200\r\n                    w-full\r\n                    py-1\r\n                    px-2\r\n                    text-gray-700\r\n                    leading-tight\r\n                    focus:outline-none\r\n                    focus:shadow-outline\r\n                    focus:ring-2\r\n                    focus:ring-pink-200\r\n                ",id:"comuna",placeholder:"Comuna",list:"lista-comuna","onUpdate:modelValue":o[3]||(o[3]=n=>c.infoItem.comuna=n)},null,512),[[f,c.infoItem.comuna]]),a("datalist",fn,[(n(!0),e(t,null,g(c.comunas,((a,r)=>(n(),e("option",{key:r,value:a},null,8,["value"])))),128))])]),a("div",xn,[yn,u(a("input",{class:"\r\n                    appearance-none\r\n                    border\r\n                    rounded\r\n                    border-pink-200\r\n                    w-full\r\n                    py-1\r\n                    px-2\r\n                    text-gray-700\r\n                    leading-tight\r\n                    focus:outline-none\r\n                    focus:shadow-outline\r\n                    focus:ring-2\r\n                    focus:ring-pink-200\r\n                ",id:"ubicacion",placeholder:"Descripción","onUpdate:modelValue":o[4]||(o[4]=n=>c.infoCasa.ubicacion=n)},null,512),[[f,c.infoCasa.ubicacion]])]),a("div",vn,[wn,a(p,{modelValue:c.infoItem.fecha,"onUpdate:modelValue":o[5]||(o[5]=n=>c.infoItem.fecha=n),id:"fecha",mode:"dateTime",color:"pink"},null,8,["modelValue"])]),a("div",kn,[Cn,u(a("select",{class:["border rounded border-pink-200 w-full py-1 px-2 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-pink-200",c.infoCasa.orientacion?"text-gray-700":"text-gray-400"],id:"orientacion","onUpdate:modelValue":o[6]||(o[6]=n=>c.infoCasa.orientacion=n)},[Bn,(n(!0),e(t,null,g(c.orientaciones,((a,r)=>(n(),e("option",{class:"text-gray-700",key:r,value:a},y(`${a[0].toUpperCase()}${a.slice(1)}`),9,["value"])))),128))],2),[[x,c.infoCasa.orientacion]])]),a(h,{class:"mb-6",images:c.imagenes,"onUpdate:images":o[7]||(o[7]=n=>c.imagenes=n),paBorrar:c.paBorrar,"onUpdate:paBorrar":o[8]||(o[8]=n=>c.paBorrar=n)},null,8,["images","paBorrar"]),a("div",In,[a("button",{class:"\r\n                    bg-gray-400\r\n                    hover:bg-gray-600\r\n                    text-white\r\n                    font-bold\r\n                    py-2\r\n                    px-4\r\n                    rounded\r\n                    focus:outline-none\r\n                    focus:shadow-outline\r\n                    focus:ring-2\r\n                    focus:ring-pink-200\r\n                ",type:"button",onClick:o[9]||(o[9]=n=>r.$emit("close"))}," Cancelar "),a("button",{class:["bg-pink-400 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-pink-200",{"animate-pulse":s.guardando}],type:"button",onClick:o[10]||(o[10]=(...n)=>d.handleSubmit&&d.handleSubmit(...n))}," Guardar ",2)])])};const Dn={name:"EditIcon"},$n={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},Sn=a("path",{d:"M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"},null,-1),Fn=a("path",{d:"M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"},null,-1);Dn.render=function(a,r,t,o,i,s){return n(),e("svg",$n,[Sn,Fn])};const jn={name:"CasaList",components:{CasaForm:cn,EditIcon:Dn,DeleteIcon:P,StarIcon:J},props:{casas:Array},emits:["cargarCasas"],data:()=>({error:"",edit:"",guardando:!1,eliminando:"",destacando:""}),methods:{urlDev:n=>"http://localhost:3000/"+n,formatFecha:n=>new Date(n).toLocaleString(),async actualizarCasa(n){this.guardando=!0,await M.update(this.edit,n),this.edit="",this.guardando=!1,this.$emit("cargarCasas")},async eliminarCasa(n){this.eliminando=n,await M.delete(n),this.eliminando="",this.$emit("cargarCasas")},async cambiarDestacado(n,e){this.destacando=n;const a=new FormData;a.set("destacado",e),await M.destacar(n,a),this.destacando="",this.$emit("cargarCasas")}}},Un={key:0,class:"error"},_n={class:"grid grid-cols-3 gap-4"},En={key:1},Mn={class:"flex justify-between"},Vn={class:"text-xl"},Gn={class:"text-sm text-gray-600"},Ln={class:"text-lg"},Pn={class:"flex justify-end pt-3 space-x-2"};jn.render=function(r,o,s,l,c,d){const u=i("CasaForm"),p=i("StarIcon"),h=i("EditIcon"),m=i("DeleteIcon");return n(),e(t,null,[c.error?(n(),e("p",Un,y(c.error),1)):v("",!0),a("div",_n,[(n(!0),e(t,null,g(s.casas,(r=>(n(),e("div",{key:r._id,class:["border rounded p-5 bg-gray-100 shadow",{"col-span-full order-first":c.edit===r._id}]},[c.edit===r._id?(n(),e(u,{key:0,casa:r,guardando:c.guardando,onClose:o[1]||(o[1]=n=>c.edit=""),onGuardar:d.actualizarCasa},null,8,["casa","guardando","onGuardar"])):(n(),e("div",En,[a("div",Mn,[a("h3",Vn,y(r.titulo),1),a("small",Gn,y(r.estado),1)]),r.imagenes?(n(),e("img",{key:0,src:d.urlDev(r.imagenes[0]),alt:r.titulo},null,8,["src","alt"])):v("",!0),a("h4",Ln,y(r.item.descripcion),1),a("p",null,y(r.item.ubicacion),1),a("p",null,y(d.formatFecha(r.fecha)),1),a("div",Pn,[a(p,{class:["text-dorado",c.destacando==r._id?"animate-bounce":"cursor-pointer",{"fill-current":r.destacado}],onClick:n=>d.cambiarDestacado(r._id,!r.destacado)},null,8,["class","onClick"]),a(h,{class:"text-blue-400 cursor-pointer",onClick:n=>c.edit=r._id},null,8,["onClick"]),a(m,{class:["text-rojo",c.eliminando==r._id?"animate-bounce":"cursor-pointer"],onClick:n=>d.eliminarCasa(r._id)},null,8,["class","onClick"])])]))],2)))),128))])],64)};const zn={name:"CasaMain",components:{CasaForm:cn,CasaList:jn},data:()=>({casas:[],nuevo:!1,guardando:!1}),methods:{async cargarCasas(){this.casas=await M.index()},async crearCasa(n){this.guardando=!0,await M.create(n),this.guardando=!1,this.nuevo=!1,this.cargarCasas()}},created(){this.cargarCasas()}},An={class:"container mx-auto pb-10 space-y-4"};zn.render=function(r,t,o,s,l,c){const d=i("CasaForm"),u=i("CasaList");return n(),e("div",An,[l.nuevo?(n(),e(d,{key:1,guardando:l.guardando,onClose:t[2]||(t[2]=n=>l.nuevo=!1),onGuardar:c.crearCasa},null,8,["guardando","onGuardar"])):(n(),e("button",{key:0,class:"\r\n                w-full\r\n                border border-pink-600\r\n                rounded\r\n                px-5\r\n                hover:bg-pink-600 hover:shadow\r\n                text-pink-600\r\n                hover:text-white\r\n                text-xl\r\n                uppercase\r\n                font-bold\r\n            ",onClick:t[1]||(t[1]=n=>l.nuevo=!0)}," Nueva Casa ")),a(u,{casas:l.casas,onCargarCasas:c.cargarCasas},null,8,["casas","onCargarCasas"])])};const Tn="http://localhost:3000/api/banners/";class On{static async index(){return await s.get(Tn).then((n=>n.data)).catch((n=>console.error(n)))}static async create(n){return await s.post(Tn,n).then((n=>console.log(n))).catch((n=>console.error(n)))}static async update(n,e){return console.log("id: "+n),console.log("data:"),console.log(e),await s.put(`${Tn}editar/${n}`,e).then((n=>console.log(n))).catch((n=>console.error(n)))}static async delete(n){return await s.delete(`${Tn}${n}`).then((n=>{console.log(n)})).catch((n=>{console.error(n)}))}}const Nn={name:"ImgDropSingle",components:{UploadIcon:V},props:["image"],emits:["update"],data:()=>({preview:"",dragging:!1,hovering:!1}),methods:{drop(n){this.addFile(n.dataTransfer.files[0]),this.dragging=!1},addFile(n){this.preview=URL.createObjectURL(n),this.$emit("update",n)}}},Rn={class:"relative"},Hn=a("p",null,"Haz click o arrastra tu imagen aquí",-1);Nn.render=function(r,t,o,s,l,c){const d=i("UploadIcon");return n(),e("div",{id:"upload",class:["relative w-full h-full mx-auto p-6 bg-gray-50 border-4 border-dashed border-gray-300 rounded-lg transition-colors duration-200 ease-out",{" border-blue-200":l.dragging}],onDragover:t[4]||(t[4]=h((n=>l.dragging=l.hovering=!0),["prevent"])),onDragleave:t[5]||(t[5]=h((n=>l.dragging=l.hovering=!1),["prevent"])),onDrop:t[6]||(t[6]=h((n=>c.drop(n)),["prevent"]))},[a("input",{class:"w-full h-full opacity-0 absolute inset-0 z-20 cursor-pointer",type:"file",accept:"image/*",onChange:t[1]||(t[1]=n=>c.addFile(n.target.files[0])),onMouseenter:t[2]||(t[2]=n=>l.hovering=!0),onMouseleave:t[3]||(t[3]=n=>l.hovering=!1)},null,32),a("div",Rn,[a("img",{class:"w-full object-contain rounded-lg shadow-inner",src:l.preview,alt:""},null,8,["src"]),a("div",{class:["flex flex-col justify-center items-center text-center rounded-lg transition-all duration-300 ease-out",l.preview?" absolute inset-0 z-10 bg-black text-gray-200"+(l.hovering?" opacity-100 bg-opacity-50":" opacity-0"):" text-gray-500"]},[a(d,{class:"w-36"}),Hn],2)])],34)};const qn={name:"BannerForm",components:{ImgDropSingle:Nn},props:{banner:{type:Object,default:function(){return{tituloBanner:"",imagenBanner:"",urlBanner:""}}},guardando:Boolean},emits:["close","guardar"],data(){return{tituloBanner:this.banner.tituloBanner,imagenBanner:this.banner.imagenBanner,urlBanner:this.banner.urlBanner}},methods:{handleSubmit(){let n=new FormData;n.set("file",this.imagenBanner),n.set("tituloBanner",this.tituloBanner),n.set("urlBanner",this.urlBanner),this.$emit("guardar",n)}}},Zn={class:"mb-4"},Jn=a("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"tituloBanner"}," Título ",-1),Kn={class:"mb-4"},Qn=a("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"urlBanner"}," Url ",-1),Wn={class:"float-right space-x-2"};qn.render=function(r,t,o,s,l,c){const d=i("ImgDropSingle");return n(),e("form",{class:["bg-white shadow rounded px-8 pt-6 pb-8 mb-4 flow-root",{"mx-auto w-1/2":0===o.banner.tituloBanner.length}]},[a("div",Zn,[Jn,u(a("input",{class:"\r\n                    appearance-none\r\n                    border\r\n                    rounded\r\n                    border-pink-200\r\n                    w-full\r\n                    py-1\r\n                    px-2\r\n                    text-gray-700\r\n                    leading-tight\r\n                    focus:outline-none\r\n                    focus:shadow-outline\r\n                    focus:ring-2\r\n                    focus:ring-pink-200\r\n                ",id:"tituloBanner",type:"text",placeholder:"Título","onUpdate:modelValue":t[1]||(t[1]=n=>l.tituloBanner=n)},null,512),[[f,l.tituloBanner]])]),a("div",null,[a(d,{class:"mb-6",images:l.imagenBanner,onUpdate:t[2]||(t[2]=n=>l.imagenBanner=n)},null,8,["images"])]),a("div",Kn,[Qn,u(a("input",{class:"\r\n                    appearance-none\r\n                    border\r\n                    rounded\r\n                    border-pink-200\r\n                    w-full\r\n                    py-1\r\n                    px-2\r\n                    text-gray-700\r\n                    leading-tight\r\n                    focus:outline-none\r\n                    focus:shadow-outline\r\n                    focus:ring-2\r\n                    focus:ring-pink-200\r\n                ",id:"urlBanner",type:"text",placeholder:"Url","onUpdate:modelValue":t[3]||(t[3]=n=>l.urlBanner=n)},null,512),[[f,l.urlBanner]])]),a("div",Wn,[a("button",{class:"\r\n                    bg-gray-400\r\n                    hover:bg-gray-600\r\n                    text-white\r\n                    font-bold\r\n                    py-2\r\n                    px-4\r\n                    rounded\r\n                    focus:outline-none\r\n                    focus:shadow-outline\r\n                    focus:ring-2\r\n                    focus:ring-pink-200\r\n                ",type:"button",onClick:t[4]||(t[4]=n=>r.$emit("close"))}," Cancelar "),a("button",{class:["bg-pink-400 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-pink-200",{"animate-pulse":o.guardando}],type:"button",onClick:t[5]||(t[5]=(...n)=>c.handleSubmit&&c.handleSubmit(...n))}," Guardar ",2)])],2)};const Xn="http://localhost:3000/api/agenda/";class Yn{static async index(){return await s.get(Xn).then((n=>n.data)).catch((n=>console.error(n)))}static async create(n){return await s.post(Xn,n).then((n=>console.log(n))).catch((n=>console.error(n)))}static async delete(n){return await s.delete(`${Xn}${n}`).then((n=>{console.log(n)})).catch((n=>{console.error(n)}))}}const ne={name:"EventoForm",components:{DatePicker:b},props:{idBanner:String,agenda:{type:Object,default:function(){return{ubicacion:"",fechaIni:"",fechaFin:"",horario:!1,recurrencia:"",iteracion:""}}},guardando:Boolean},emits:["cerrar","guardar"],data(){return{ubicaciones:[],recurrencias:["continuado","semanal"],ubicacion:this.agenda.ubicacion,fechas:{start:new Date(this.agenda.fechaIni),end:new Date(this.agenda.fechaFin)},datePickerConfig:{start:{timeAdjust:"00:00:00"},end:{timeAdjust:"23:55:00"}},horario:this.agenda.horario,recurrencia:this.agenda.recurrencia,iteracion:this.agenda.iteracion}},created(){s("http://localhost:3000/api/ubicaciones").then((n=>this.ubicaciones=n.data)).catch((n=>console.error(n)))},methods:{handleSubmit(){let n={ubicacion:this.ubicacion,idBanner:this.idBanner,fechaIni:this.fechas.start.toISOString(),fechaFin:this.fechas.end.toISOString(),horario:this.horario,recurrencia:this.recurrencia,iteracion:this.iteracion};this.$emit("guardar",n)}}},ee={class:"bg-white shadow rounded px-8 pt-6 pb-8 mb-4 flow-root"},ae={class:"mb-4"},re=a("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"ubicacion"}," Ubicación ",-1),te=a("option",{value:"",disabled:"",selected:"",hidden:""}," Selecciona una ubicación ",-1),oe={class:"mb-4"},ie=a("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"fechas"}," Rango de fechas ",-1),se={class:"mb-4"},le=a("label",{class:"ml-3 text-gray-700 text-sm font-bold mb-2",for:"horario"}," Aplicar horario cada día ",-1),ce={class:"mb-4"},de=a("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"recurrencia"}," Recurrencia ",-1),ue=a("option",{value:"",disabled:"",selected:"",hidden:""}," Selecciona un tipo de recurrencia ",-1),pe={class:"mb-4"},ge=a("label",{class:"block text-gray-700 text-sm font-bold mb-2",for:"iteracion"}," Repeticiones ",-1),he={class:"float-right space-x-2"};ne.render=function(r,o,s,l,c,d){const h=i("DatePicker");return n(),e("form",ee,[a("div",ae,[re,u(a("select",{class:["border rounded border-pink-200 w-full py-1 px-2 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-pink-200",c.ubicacion?"text-gray-700":"text-gray-400"],id:"ubicacion","onUpdate:modelValue":o[1]||(o[1]=n=>c.ubicacion=n)},[te,(n(!0),e(t,null,g(c.ubicaciones,((a,r)=>(n(),e("option",{class:"text-gray-700",key:r,value:a},y(`${a[0].toUpperCase()}${a.slice(1)}`),9,["value"])))),128))],2),[[x,c.ubicacion]])]),a("div",oe,[ie,a(h,{id:"fechas",mode:"dateTime","is-range":"","minute-increment":5,"min-date":new Date,color:"pink","model-config":c.datePickerConfig,modelValue:c.fechas,"onUpdate:modelValue":o[2]||(o[2]=n=>c.fechas=n)},null,8,["min-date","model-config","modelValue"])]),a("div",se,[u(a("input",{class:"\r\n                    border\r\n                    rounded\r\n                    border-pink-200\r\n                    h-4\r\n                    w-4\r\n                    text-gray-700\r\n                    focus:ring-2 focus:ring-pink-200\r\n                ",id:"horario",type:"checkbox","onUpdate:modelValue":o[3]||(o[3]=n=>c.horario=n)},null,512),[[w,c.horario]]),le]),a("div",ce,[de,u(a("select",{class:["border rounded border-pink-200 w-full py-1 px-2 leading-tight focus:outline-none focus:shadow-outline focus:ring-2 focus:ring-pink-200",c.recurrencia?"text-gray-700":"text-gray-400"],id:"recurrencia","onUpdate:modelValue":o[4]||(o[4]=n=>c.recurrencia=n)},[ue,(n(!0),e(t,null,g(c.recurrencias,((a,r)=>(n(),e("option",{class:"text-gray-700",key:r,value:a},y(`${a[0].toUpperCase()}${a.slice(1)}`),9,["value"])))),128))],2),[[x,c.recurrencia]])]),u(a("div",pe,[ge,u(a("input",{class:"\r\n                    border\r\n                    rounded\r\n                    border-pink-200\r\n                    w-full\r\n                    py-1\r\n                    px-2\r\n                    text-gray-700\r\n                    leading-tight\r\n                    focus:outline-none focus:ring-2 focus:ring-pink-200\r\n                ",id:"iteracion",type:"number",placeholder:"Número de repeticiones","onUpdate:modelValue":o[5]||(o[5]=n=>c.iteracion=n)},null,512),[[f,c.iteracion]])],512),[[p,c.recurrencia&&"continuado"!==c.recurrencia]]),a("div",he,[a("button",{class:"\r\n                    bg-gray-400\r\n                    hover:bg-gray-600\r\n                    text-white\r\n                    font-bold\r\n                    py-2\r\n                    px-4\r\n                    rounded\r\n                    focus:outline-none\r\n                    focus:shadow-outline\r\n                    focus:ring-2\r\n                    focus:ring-pink-200\r\n                ",type:"button",onClick:o[6]||(o[6]=n=>r.$emit("cerrar"))}," Cancelar "),a("button",{class:["bg-pink-400 hover:bg-pink-600 text-white font-bold py-2 px-4 rounded focus:outline-none focus:ring-2 focus:ring-pink-200",{"animate-pulse":s.guardando}],type:"button",onClick:o[7]||(o[7]=(...n)=>d.handleSubmit&&d.handleSubmit(...n))}," Guardar ",2)])])};const me={name:"BannerAgenda",components:{EventoForm:ne,DeleteIcon:P},props:{idBanner:String,agenda:Array},emits:["cargarBanners"],data:()=>({nuevo:!1,guardando:!1,eliminando:"",error:""}),methods:{formatFecha:n=>new Date(n).toLocaleString(),async agendar(n){this.guardando=!0;try{await Yn.create(n),this.nuevo=!1,this.$emit("cargarBanners")}catch(e){console.error(e)}this.guardando=!1},async eliminarEvento(n){if(this.eliminando=n,window.confirm("¿Eliminar evento?"))try{await Yn.delete(n),this.$emit("cargarBanners")}catch(e){console.error(e)}this.eliminando=""}}},be=m();c("data-v-5d8dee7a");const fe={class:"divide-y"},xe=o(" Ubicación: "),ye=o(" Fecha de inicio: "),ve=o(" Fecha de fin: "),we=o(" Con horario: "),ke=o(" Recurrencia: "),Ce={key:0},Be=o(" Semanas restantes: "),Ie={class:"mt-auto flex justify-end pt-3 space-x-2"};d();const De=be(((r,o,s,l,c,d)=>{const u=i("EventoForm"),p=i("DeleteIcon");return n(),e(t,null,[c.nuevo?(n(),e(u,{key:1,idBanner:s.idBanner,guardando:c.guardando,onGuardar:d.agendar,onCerrar:o[2]||(o[2]=n=>c.nuevo=!1)},null,8,["idBanner","guardando","onGuardar"])):(n(),e("button",{key:0,class:"\r\n            mb-5\r\n            px-4\r\n            py-2\r\n            bg-pink-400\r\n            text-white\r\n            font-bold\r\n            rounded\r\n            hover:bg-pink-600\r\n        ",onClick:o[1]||(o[1]=n=>c.nuevo=!0)}," Agregar Evento ")),(n(!0),e(t,null,g(s.agenda,((r,t)=>(n(),e("div",{key:t,class:"bg-white shadow rounded px-8 py-6 mb-4"},[a("ul",fe,[a("li",null,[xe,a("span",null,y(r.ubicacion),1)]),a("li",null,[ye,a("span",null,y(d.formatFecha(r.fechaIni)),1)]),a("li",null,[ve,a("span",null,y(d.formatFecha(r.fechaFin)),1)]),a("li",null,[we,a("span",null,y(r.horario?"Sí":"No"),1)]),a("li",null,[ke,a("span",null,y(r.recurrencia),1)]),"semanal"===r.recurrencia?(n(),e("li",Ce,[Be,a("span",null,y(r.iteracion),1)])):v("",!0)]),a("div",Ie,[a(p,{class:["text-red-500",c.eliminando==r._id?"animate-bounce":"cursor-pointer"],onClick:n=>d.eliminarEvento(r._id)},null,8,["class","onClick"])])])))),128)),a("button",{class:"\r\n            mt-auto\r\n            px-4\r\n            py-2\r\n            bg-gray-400\r\n            text-white\r\n            font-bold\r\n            rounded\r\n            hover:bg-gray-600\r\n        ",type:"button",onClick:o[3]||(o[3]=n=>r.$emit("cerrar"))}," Volver ")],64)}));me.render=De,me.__scopeId="data-v-5d8dee7a";const $e={name:"CalendarIcon"},Se={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-calendar"},Fe=a("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"},null,-1),je=a("path",{d:"M16 2v4M8 2v4M3 10h18"},null,-1);$e.render=function(a,r,t,o,i,s){return n(),e("svg",Se,[Fe,je])};const Ue={name:"BannerList",components:{BannerForm:qn,BannerAgenda:me,EditIcon:Dn,DeleteIcon:P,CalendarIcon:$e},props:{banners:Array},emits:["cargarBanners"],data:()=>({edit:"",guardando:!1,eliminando:"",error:"",agenda:""}),methods:{urlDev:n=>"http://localhost:3000/"+n,async actualizarBanner(n){this.guardando=!0;try{await On.update(this.edit,n),this.$emit("cargarBanners")}catch(e){console.error(e)}this.guardando=!1},async borrarBanner(n){if(this.eliminando=n,window.confirm("¿Eliminar banner?"))try{await On.delete(n),this.$emit("cargarBanners")}catch(e){console.error(e)}this.eliminando=""}}},_e={key:0,class:"error"},Ee={class:"grid grid-cols-3 gap-4"},Me={class:"text-xl mb-2"},Ve={key:2,class:"flex-grow flex flex-col justify-between text-center"},Ge={class:"mt-auto flex justify-end pt-3 space-x-2"};Ue.render=function(r,o,s,l,c,d){const u=i("BannerForm"),p=i("BannerAgenda"),h=i("CalendarIcon"),m=i("EditIcon"),b=i("DeleteIcon");return n(),e(t,null,[c.error?(n(),e("p",_e,y(c.error),1)):v("",!0),a("div",Ee,[(n(!0),e(t,null,g(s.banners,(t=>(n(),e("div",{key:t._id,class:"flex flex-col border rounded p-5 bg-gray-100 shadow"},[a("h2",Me,y(t.tituloBanner),1),c.edit==t._id?(n(),e(u,{key:0,banner:t,guardando:c.guardando,onClose:o[1]||(o[1]=n=>c.edit=""),onGuardar:d.actualizarBanner},null,8,["banner","guardando","onGuardar"])):c.agenda===t._id?(n(),e(p,{key:1,idBanner:t._id,agenda:t.agenda,onCerrar:o[2]||(o[2]=n=>c.agenda=""),onCargarBanners:o[3]||(o[3]=n=>r.$emit("cargarBanners"))},null,8,["idBanner","agenda"])):(n(),e("div",Ve,[a("div",null,[a("img",{class:"mb-2 mx-auto rounded-lg",src:d.urlDev(t.imagenBanner),alt:t.tituloBanner},null,8,["src","alt"]),a("a",{href:t.urlBanner},y(t.urlBanner),9,["href"])]),a("div",Ge,[a(h,{class:"text-blue-400 cursor-pointer",onClick:n=>c.agenda=t._id},null,8,["onClick"]),a(m,{class:"text-yellow-400 cursor-pointer",onClick:n=>c.edit=t._id},null,8,["onClick"]),a(b,{class:["text-red-500",c.eliminando==t._id?"animate-bounce":"cursor-pointer"],onClick:n=>d.borrarBanner(t._id)},null,8,["class","onClick"])])]))])))),128))])],64)};const Le={name:"BannerMain",components:{BannerForm:qn,BannerList:Ue},data:()=>({banners:[],nuevo:!1,guardando:!1,error:""}),created(){this.cargarBanners()},methods:{async cargarBanners(){try{this.banners=await On.index()}catch(n){this.error=n.message}},async crearBanner(n){this.guardando=!0,await On.create(n),this.guardando=!1,this.nuevo=!1,this.cargarBanners()}}},Pe={class:"container mx-auto pb-10"},ze={key:0,class:"text-center bg-red-200 mb-5 p-4 rounded shadow"};Le.render=function(r,t,o,s,l,c){const d=i("BannerForm"),u=i("BannerList");return n(),e("div",Pe,[l.error?(n(),e("div",ze,y(l.error),1)):v("",!0),l.nuevo?(n(),e(d,{key:2,guardando:l.guardando,onClose:t[2]||(t[2]=n=>l.nuevo=!1),onGuardar:c.crearBanner},null,8,["guardando","onGuardar"])):(n(),e("button",{key:1,class:"\r\n                w-full\r\n                border border-pink-600\r\n                rounded\r\n                mb-5\r\n                px-5\r\n                hover:bg-pink-600 hover:shadow\r\n                text-pink-600\r\n                hover:text-white\r\n                text-xl\r\n                uppercase\r\n                font-bold\r\n            ",onClick:t[1]||(t[1]=n=>l.nuevo=!0)}," Nuevo Banner ")),a(u,{banners:l.banners,onCargarBanners:c.cargarBanners},null,8,["banners","onCargarBanners"])])};const Ae={name:"BannerTest",data:()=>({banners:{principal:"",ladito:""}}),created(){const n="http://localhost:3000/";s(`${n}api/banners/principal`).then((n=>this.banners.principal=n.data)).catch((n=>console.error(n))),s(`${n}api/banners/ladito`).then((n=>this.banners.ladito=n.data)).catch((n=>console.error(n)))},methods:{urlDev:n=>"http://localhost:3000/"+n}},Te={class:"container mx-auto flex flex-col items-center"},Oe=a("h1",{class:"mb-14 text-3xl"},"Serial Experiments Banners",-1),Ne={class:"mb-2 text-xl capitalize"};Ae.render=function(r,o,i,s,l,c){return n(),e("div",Te,[Oe,(n(!0),e(t,null,g(l.banners,((r,t)=>(n(),e("figure",{key:t,class:"mb-10"},[a("figcaption",Ne,y(t),1),a("img",{src:c.urlDev(r),alt:`banner ${t}`,width:"336"},null,8,["src","alt"])])))),128))])};const Re={name:"NotFound"};Re.render=function(a,r,t,o,i,s){return n(),e("h1",null,"Error 404: No encontrado")};const He=[{path:"/panel/casa",component:zn},{path:"/panel/banners",component:Le},{path:"/panel/banner_test",component:Ae},{path:"/panel/:pathMatch(.*)",component:Re}],qe=k({history:C(),routes:He});B(I).use(qe).mount("#panel");
